<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Discipline</title><!-- <link rel="manifest" href="/manifest.json" /> --><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="white"><link rel="apple-touch-icon" href="images/discipline-256.png"><style>body{margin:0;font-family:Nunito,candara,arial;overflow-wrap:break-word;background:#fafafa}#graphs-menu{display:none}.green{background:#17bc25;color:#fff}.blue{background:#f9efff;color:#000}.orange{background:#b657af;color:#fff}#header{width:100%;text-align:center;color:#fff;background:#fafafa;margin:0;font-size:15px;z-index:100;cursor:pointer;position:fixed;top:0;opacity:1;border-bottom:1px solid #d3d3d3}#nav-container{display:flex;flex-direction:row;margin-left:9px;text-align:center;max-width:925px}#nav-container svg{padding-top:6px}.horizontal-menu{list-style-type:none;margin:6px 0 0 0;text-align:left;float:left;padding-left:1px}.horizontal-menu li{height:30px;width:86px;border-radius:10px 10px 0 0;float:left;margin-right:7px;margin-top:0;text-align:center;padding-top:8px;padding-left:7px;background-color:#c369bc;border-bottom:1px solid #c369bc;margin-bottom:-1px}.horizontal-menu li.active{background:#fff;height:29px;margin-bottom:-1px;border-bottom:1px solid #fff;border-top:1px solid #d3d3d3;border-left:1px solid #d3d3d3;border-right:1px solid #d3d3d3}.main-title.fixed{position:fixed;width:100%;height:27px}.horizontal-submenu{list-style-type:none;margin:0;height:27px;padding-left:8px}.horizontal-submenu li{float:left;margin-right:24px;height:30px;cursor:pointer;font-size:16px;margin-top:7px;font-weight:700}.horizontal-submenu li.selected-underline{float:left;border-bottom:4px solid #b657af}a,a span,a:active,a:visited{text-decoration:none;color:#fff;margin-right:5px}li.active a,li.active a span,li.active a:active,li.active a:visited{color:#000;font-weight:700}.filter-bar{background:#fff;opacity:1;max-width:500px;height:30px;margin:0 0 10px 0;padding:10px;border-radius:5px;box-shadow:-1px 2px 17px 5px rgb(0 0 0 / 20%)}.divider{margin-bottom:65px}.box{padding:19px;border-radius:12px}.main-section{margin-top:42px;padding-bottom:80px;background:#fafafa}.habit-graph{background:#fff}.box.new-habit,.habit-setting{width:208px;padding:20px}.box{border:1px solid #d3d3d3}.box.new-habit{border:1px solid #c79bf0}.box.canva-wrapper{width:300px;height:360px;font-weight:700}.box.canva-wrapper.week-box{height:120px}.box.canva-wrapper.streak-box{height:260px}.box.big-action-button,.box.habit-update,.daily-summary{width:200px;height:190px;padding:20px}.box.habit-update{background-color:#fcfbfb;order:70}.box.big-action-button:hover{background:#cb79c5;border:1px solid #cb79c5}#date-filter:hover,.minus-button.normal:hover,.minus-button:hover,.plus-button.normal:hover,.plus-button:hover{background:#cb79c5}.box.big-action-button{background-color:#b657af;display:flex;color:#fff;font-weight:700;font-size:26px;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;cursor:pointer;order:100;border:1px solid #b657af}.huge-button{width:208px;height:355px;background-color:#b657af;box-shadow:-1px 2px 14px 0 rgb(0 0 0 / 20%);color:#fff;font-size:23px;font-weight:700;padding:10px;display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;cursor:pointer}.huge-button i{font-size:100px}.main-title{padding:14px 12px 13px 12px;border-bottom:1px solid #d3d3d3;background:#fff}#footer,#progress-title,.filter-bar,.graph-container,.habits-container,.habits-definition-container,.main-action-bar,.week-day-selection{display:flex;flex-wrap:wrap;flex-direction:row;align-items:flex-start}.graph-container,.habits-container,.habits-definition-container{justify-content:space-evenly;background:#fafafa}.graph-container{display:flex}#streaks-container{display:none}.main-action-bar,.myChart{width:100%}h2{color:#424242;margin:0}.update-button{color:#fff;margin:10px 20px 0 0;padding:10px;border-radius:5px;width:200px;text-align:center;cursor:pointer}.side-title{margin-right:30px}#habit-filters{margin-top:3px}.progress-container{font-size:13px;color:#423e3e;margin-top:3px;clear:both;padding-top:10px}.number-of-completion[type=number]{width:69px;font-size:30px;margin-top:6px;float:left;text-align:left;padding-left:12px}.simple-checkbox{float:left;margin-bottom:12px}.percentage-completion::after{content:" %"}.habit-description{font-weight:700;color:#404040}i{margin-right:6px}.bold{font-weight:700}#new-description,.habit-description-definition{width:191px;margin-bottom:10px}#footer{display:none;position:fixed;bottom:0;background:#fff;width:100%;padding:0 10px 32px 10px;box-shadow:-1px 2px 20px 0 rgb(0 0 0 / 20%)}.minus-button,.plus-button{width:25px;text-align:center;height:35.7px;padding-top:9px;float:left;cursor:pointer}.minus-button.normal,.plus-button.normal{background:#b657af;color:#fff}.minus-button.inverted,.plus-button.inverted{color:#b657af;background:#fff}.plus-button{margin:6px 5px 0 0;border-radius:0 20px 20px 0}.minus-button{margin:6px 0 0 0;border-radius:20px 0 0 20px}.side-text{float:left;margin-top:14px}.label{clear:both}.add-button{font-size:23px;clear:both;background:#b657af;color:#fff;text-align:center;padding:10px;border-radius:9px;margin-top:16px;cursor:pointer}.target-container{width:150px;height:50px}.weekday{margin:3px;padding:4px;cursor:pointer;font-size:13px;width:13px;border-radius:13px;text-align:center}.weekday.selected{color:#fff;background-color:#b657af}.weekday{color:#b5b5b5}.week-day-selection{margin-top:13px;margin-bottom:10px}.habit-description-definition{margin-bottom:10px}.habit-setting{background:#fff}.habit-title{font-weight:700;margin-bottom:20px}.box.big-action-button i{font-size:100px}#graphs-section,#progress-section{display:none}.overlay-for-message,.positive-message,.super-positive-message{width:100%;height:100%;position:fixed;top:0;left:0;display:none;flex-direction:column;justify-content:space-evenly;align-items:center}.overlay-for-message{background-color:rgba(0,0,0,.4);z-index:100}.message-in-overlay{width:60%;background-color:#f5f5f5;opacity:1;padding:20px;border-radius:10px}.positive-message{background-color:#b657af;z-index:102;color:#fff}.super-positive-message{background-color:#0ae809;z-index:102;color:#fff}#positive-message i,#super-positive-message i{animation-duration:.25s;animation-name:arriveFromLeft}#positive-message-title,#super-positive-message-title{opacity:0;animation-duration:.25s;animation-name:appearWithColor;animation-delay:.25s;animation-fill-mode:forwards}#positive-message-subtitle,#super-positive-message-subtitle{opacity:0;animation-duration:.5s;animation-name:appearWithColor;animation-delay:.5s;animation-fill-mode:forwards}@keyframes arriveFromLeft{from{margin-right:100%}75%{font-size:300%;margin-left:0}to{margin-left:0}}@keyframes appearWithColor{from{opacity:0}to{opacity:1}}.positive-message-button,.super-positive-message-button{background-color:#fff;width:200px;font-size:18px;padding:15px;border-radius:30px;cursor:pointer;text-align:center}.positive-message-button{color:#b657af}.super-positive-message-button{color:#0ae809}.positive-message .icon,.super-positive-message .icon{font-size:88px}#daily-journal{width:100%}#date-filter{border:2px solid #b657af;border-radius:15px;padding-left:10px;padding-right:10px;background:#f5bcff}input,textarea{border:1px solid #d3d3d3;font-family:Nunito,candara,arial;background-color:#fff}input[type=date],textarea{border-radius:5px}textarea{padding:5px}#habits-section{display:none}#last-saved-information,#last-saved-information-habits{color:#d3d3d3;font-size:13px;display:block;margin-top:9px}#last-saved-information-habits{margin-left:21px}.date-label{color:#838383}.hidden{display:none}.subtitle{color:grey;font-size:14px;margin-top:10px;margin-bottom:10px;font-weight:100}.critical-link{margin-top:12px;text-decoration:underline;font-weight:400;color:#a750a1;cursor:pointer}table{border-collapse:collapse}th{border-bottom:1px solid #c4c4c4;font-weight:100;color:#545454}.fa-circle-o.today,th.today{color:#d330cb;font-weight:700}th.past{color:#919191}td,td i,th{width:30px;text-align:center}td i{margin-left:7px;color:#55d355;padding-top:3px}.fa-warning,.red,td{color:red}:nth-col(2n+1){background-color:pink}.graph-title{margin-bottom:15px}.journal-container{padding:40px 35px 35px 35px;margin:84px 20px 20px 20px;border:1px solid #d3d3d3;border-radius:12px;background:#fff;display:block}.journal-container-wrapper{display:none}#debug-section{display:none}#daily-summary-container{order:90;display:none}#daily-summary-comment{margin-top:25px;padding-left:14px;width:106px;float:left;font-weight:700}#daily-summary{margin-top:10px;float:left}#no-graph{margin-top:10px}.custom-checkbox-container{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:22px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:26px;height:15px;margin-top:13px}.custom-checkbox-container:hover input~.checkmark{background-color:#f0c0f1}.custom-checkbox-container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark{position:absolute;top:0;left:0;height:25px;width:25px;background-color:#fff;border:1px solid #939393;border-radius:5px}.custom-checkbox-container input:checked~.checkmark{background-color:#b657af}.checkmark:after{content:"";position:absolute;display:none}.custom-checkbox-container input:checked~.checkmark:after{display:block}.custom-checkbox-container .checkmark:after{left:9px;top:4px;width:5px;height:10px;border:solid #fff;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}@media (min-width:400px) and (max-width:649px){.main-title-only{width:100%}}@media (max-width:649px){#graph-container,#streaks-container{padding-top:64px}#daily-summary-comment{width:138px;font-size:20px;margin-top:18px;padding-left:27px}#progress-title{margin-bottom:2px}.box{border-radius:12px}#footer,.filter-bar,.graph-container,.habits-container,.habits-definition-container,.main-action-bar{justify-content:space-around}.action-input{margin-left:10px;margin-right:12px;margin-top:-6px}#habit-filters{display:none}.box{margin:13px 0 0 0}#date-filter{margin:10px 0 0 0}.positive-message .sub-title,.super-positive-message .sub-title{margin:20px}.positive-message .title,.super-positive-message .title{font-size:47px;text-align:center}.positive-message .sub-title,.super-positive-message .sub-title{font-size:34px;text-align:center}.habit-description{font-size:20px;float:left;width:225px;margin-bottom:6px;margin-top:2px}.progress-container{font-size:18px}.box.big-action-button,.box.daily-summary,.box.habit-update{width:300px}.box.big-action-button{margin:13px}.daily-summary{height:161px}.number-of-completion[type=number]{height:74px;margin-top:15px}.box.habit-update{height:max-content}.minus-button,.plus-button{width:48px;height:48.5px;font-size:26px;margin-top:15px}.minus-button{border-radius:40px 0 0 40px}.plus-button{border-radius:0 40px 40px 0}.progress-container{font-size:18px}.side-text{margin-top:32px;margin-left:10px}.box.new-habit,.habit-setting{width:281px;padding:20px}.week-day-selection{clear:left}.target-container{width:180px}.number-of-completion[type=number]{width:62px;height:54px;margin-bottom:13px;margin-top:15px}#new-description,.habit-description-definition{margin-top:12px;width:272px}.weekday{font-size:23px;width:25px;border-radius:25px}.horizontal-menu li.active{height:29px}#last-saved-information{margin-top:13px;margin-left:10px}.box.habit-update i.fa.fa-minus,.box.habit-update i.fa.fa-plus{float:right;margin-top:5px;font-size:24px;position:relative;width:25px}.plus-minus{color:#b657af}.habit-description i{display:none}.progress-details{display:none}}@media (min-width:650px){#text-filter{margin-top:3px}#graph-container,#streaks-container{padding-top:78px}#daily-summary-comment{width:106px;font-size:14px}.box{margin:20px}.action-input{margin-left:16px;margin-right:16px;margin-top:5px}.positive-message .title,.super-positive-message .title{font-size:69px}.positive-message .sub-title,.super-positive-message .sub-title{font-size:45px}.box.habit-update i.fa.fa-minus,.box.habit-update i.fa.fa-plus{display:none}.habit-description{height:65px}.daily-summary{height:190px}}@media (max-width:346px){.navbar-brand{display:none}#nav-container{margin-left:0}.horizontal-menu li{margin-right:0;padding-left:5px}.horizontal-submenu li{margin-right:15px}#new-description{width:209px}.box.new-habit,.habit-setting{width:224px}.habit-description{width:187px}#daily-summary-comment{width:118px}.daily-summary{height:177px}td,td i,th{width:20px}}</style></head><body><div id="positive-message" class="positive-message"><i class="fa fa-trophy icon"></i><div class="title" id="positive-message-title"></div><div class="sub-title" id="positive-message-subtitle"></div><div class="positive-message-button" onclick="closeMessage();">OK</div></div><div id="super-positive-message" class="super-positive-message"><i class="fa fa-trophy icon"></i><div class="title" id="super-positive-message-title"></div><div class="sub-title" id="super-positive-message-subtitle"></div><div class="super-positive-message-button" onclick="closeMessage();">OK</div></div><div id="delete-message" class="positive-message"><div class="title" id="positive-message-title"><i class="fa fa-trash"></i> Item Deletion</div><div class="sub-title" id="positive-message-subtitle">Are you sure you want to delete this habit?</div><div class="positive-message-button" id="confirm-deletion-button">Yes</div><div class="positive-message-button" onclick="closeDeleteMessage();">No</div></div><div id="addition-message" class="positive-message"><i class="fa fa-trophy icon"></i><div class="title" id="positive-message-title">Habit Successfully Added !</div><div class="sub-title" id="positive-message-subtitle">What do you want to do next ?</div><div class="positive-message-button" onclick="changeTabToHabits();window.scrollTo(0, 0);closeAdditionConfirmation();">Add Another Habit</div><div class="positive-message-button" id="check-habit-button">Check My Habit</div><div class="positive-message-button" onclick="changeTabToProgress();window.scrollTo(0, 0);;closeAdditionConfirmation();">Start My Day</div></div><div id="positive-message" class="positive-message"><i class="fa fa-trophy icon"></i><div class="title" id="positive-message-title">Awesome :)</div><div class="sub-title" id="positive-message-subtitle">Congratulations, you have completed your target ! Stay strong !</div><div class="positive-message-button" onclick="closeMessage();">OK</div></div><div id="header"><div id="nav-container"><a class="navbar-brand" href="https://www.vincent-luciani.com/"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="30px" viewBox="0 0 175 173" version="1.1" id="svg8" inkscape:version="0.92.3 (2405546, 2018-03-11)" sodipodi:docname="spinnakerlogo_v2.svg"><defs id="defs2"></defs><sodipodi:namedview id="base" pagecolor="#000000" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:zoom="0.7" inkscape:cx="4.4184701" inkscape:cy="335.45816" inkscape:document-units="mm" inkscape:current-layer="layer1" showgrid="false" inkscape:window-width="1366" inkscape:window-height="703" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:pagecheckerboard="true"></sodipodi:namedview><metadata id="metadata5"><rdf:rdf><cc:work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type><dc:title></dc:title></cc:work></rdf:rdf></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-124)"><path style="fill:#ca6fc3;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 117.17263,128.42262 C 57.103952,169.32182 13.143572,226.96862 5.2916662,293.97619 63.194818,268.65226 91.951833,282.95264 143.25298,293.22024 110.28581,231.73502 106.86408,174.11323 117.17263,128.42262 Z" id="path10" inkscape:connector-curvature="0" sodipodi:nodetypes="cccc"></path></g></svg></a><nav><ul class="horizontal-menu"><li id="progress-menu" onclick="changeTabToProgress();"><a id="menu_dashboard">Progress</a></li><li id="graphs-menu" onclick="changeTabToGraphs();"><a id="menu_dashboard">Summaries</a></li><li id="habits-menu" onclick="changeTabToHabits();"><a id="menu_dashboard">Settings</a></li></ul></nav></div></div><div id="progress-section" class="main-section"><div id="progress-title" class="main-title"><div class="main-title-only"><h2>Update your progress</h2></div><div><input id="date-filter" type="date" class="action-input"></div><div id="habit-filters"><label>Filter by habit title:</label> <input id="text-filter" class="action-input" type="text"></div><label id="last-saved-information"></label></div><div id="habits-container" class="habits-container"><div id="daily-summary-container" class="box first daily-summary"><div class="habit-description"><i class="fa fa-trophy icon"></i>Daily Summary</div><div class="progress-container">Daily Completion Percentage:</div><div id="daily-summary"></div><div id="daily-summary-comment"></div></div><div class="box big-action-button" onclick="displayJournalEditBox();window.scrollTo(0, 0);"><div>Daily Journal</div><i class="fa fa-edit"></i></div><div class="box big-action-button" onclick="changeTabToHabits();window.scrollTo(0, 0);"><div>New Habit</div><i class="fa fa-plus"></i></div><div class="box big-action-button" onclick="changeTabToGraphs();window.scrollTo(0, 0);"><div>Graphs</div><i class="fa fa-bar-chart"></i></div></div></div><div id="graphs-section" class="main-section"><div class="main-title fixed"><ul class="horizontal-submenu"><li id="week-link" onclick="subMenuGo('week-link');" class="sub-menu selected-underline"><i class="fa fa-calendar"></i>Week</li><li id="streaks-link" class="sub-menu" onclick="subMenuGo('streaks-link');"><i class="fa fa-bar-chart"></i>History</li><li id="journal-link" onclick="subMenuGo('journal-link');" class="sub-menu"><i class="fa fa-edit"></i>Journal</li></ul></div><div id="graph-container" class="graph-container"><div id="no-graph">Graphs will be shown after adding at least one habit for more than one day.</div></div><div id="streaks-container" class="graph-container"><div id="no-streak">Graphs will be shown after adding at least one habit for more than one day.</div></div><div id="journal-container-wrapper" class="journal-container-wrapper"><div id="journal-container" class="journal-container"></div></div></div><div id="habits-section" class="main-section"><div id="progress-title" class="main-title"><div><h2>Add a new habit, update your entered habit</h2></div><label id="last-saved-information-habits"></label></div><div id="habits-definition-container" class="habits-definition-container"><div class="box new-habit blue"><div class="bold"><i class="fa fa-tasks"></i>New Habit</div><br><label class="label">Description:</label> <textarea rows="3" type="text" id="new-description" class="large"></textarea> <label class="label hidden">Check here if it is something you should NOT do:</label> <input type="checkbox" id="new-is-negative-flag" class="hidden" value="0"><br><div><label class="label">Daily Target:</label></div><div class="target-container"><div id="minus-in-add-div" class="minus-button normal">-</div><input type="number" id="new-target" class="number-of-completion" value="1"><div id="plus-in-add-div" class="plus-button normal">+</div></div><div class="week-day-selection" id="week-day-selection" weekday=""><label>Applies to the following days of the week:</label><div class="weekday monday">M</div><div class="weekday tuesday">T</div><div class="weekday wednesday">W</div><div class="weekday thursday">T</div><div class="weekday friday">F</div><div class="weekday saturday">S</div><div class="weekday sunday">S</div></div><div onclick="addElementFromForm();" id="add-button" class="add-button"><i class="fa fa-save"></i> Save</div></div><!-- <div class="box big-action-button" id="save-button-in-habits" onclick="extractElementsForUpdate();">
                    <div>Save</div>
                    <i class="fa fa-save"></i> 
                </div> --><div onclick="changeTabToProgress();window.scrollTo(0, 0);" id="go-to-progress-button" class="box big-action-button"><div>START</div><i class="fa fa-play"></i></div></div></div><div class="overlay-for-message" id="journal-edit-box"><div class="message-in-overlay"><div class="bold"><i class="fa fa-edit"></i>What do you think about your day ?</div><br><textarea rows="10" type="text" id="daily-journal" class="large"></textarea><div onclick="closeJournal();" id="close-journal-button" class="add-button">OK</div></div></div><div id="debug-section"><button onclick="resetHabits();">Reset habits</button> <button onclick="resetProgress();">Reset progress</button> <button onclick="resetMemory();">Reset all</button> <button onclick="resetDebugging();">Reset Debugging Messages</button> <button onclick="getMemoryDetails();">Get memory details</button><div id="debugging-text"></div>MEMORY - PROGRESS:<div id="memory-progress"></div>MEMORY - HABITS:<div id="memory-habit"></div></div><script>var giveSuperKudos=function(e,t){document.getElementById("super-positive-message").style.display="flex",document.getElementById("super-positive-message-title").innerHTML=e,document.getElementById("super-positive-message-subtitle").innerHTML=t},encourageIfPassedTarget=function(e,t,a){e==t&&a&&"true"==a?giveSuperKudos("Special kudos to you :)","You mastered a critical habit today!"):e==t&&(document.getElementById("positive-message").style.display="flex",document.getElementById("positive-message-title").innerHTML=buildCongratulationTitle("en_US")+" :)",document.getElementById("positive-message-subtitle").innerHTML=buildCongratulationSubTitle("en_US"))},closeMessage=function(){document.getElementById("positive-message").style.display="none",document.getElementById("super-positive-message").style.display="none"},buildCongratulationTitle=function(e){var t=translations[e].amazing;return t[getRandomNumber(0,t.length-1)]},buildCongratulationSubTitle=function(e){var t=translations[e].encouraging;return t[getRandomNumber(0,t.length-1)]},addHabitElement=function(e){const t=document.createElement("div");t.setAttribute("habitDescription",e.habitDescription),t.setAttribute("target",e.target),t.setAttribute("class","box habit-setting"),t.setAttribute("id",e.habitId.toString()),t.setAttribute("habitId",e.habitId),t.setAttribute("weekDay",e.weekDay),t.setAttribute("isNegative",e.isNegative),t.setAttribute("isCritical",e.isCritical);const a=document.createTextNode("Update habit:");var n=document.createElement("i");n.setAttribute("class","fa fa-tasks");const r=document.createElement("div");r.appendChild(n),r.appendChild(a),r.setAttribute("class","habit-title");const s=document.createTextNode("Habit description:"),i=document.createElement("div");i.appendChild(s);const o=document.createElement("textarea");o.value=e.habitDescription,o.setAttribute("class","habit-description-definition large"),o.setAttribute("rows",3);const d=document.createTextNode("Daily Target:"),l=document.createElement("div");l.appendChild(d);const u=document.createElement("input");u.setAttribute("class","habit-target-definition"),u.setAttribute("type","number"),u.value=e.target,t.appendChild(r),t.appendChild(i),t.appendChild(o),t.appendChild(l),t.appendChild(u);var c=dynamicWeekDaySelector(e.weekDay);t.appendChild(c);const g=document.createElement("div");g.innerHTML="Critical:";const m=document.createElement("input");m.setAttribute("type","checkbox"),m.setAttribute("class","simple-checkbox"),m.setAttribute("id","is-critical"),null!=e.isCritical&&"true"==e.isCritical?m.checked=!0:"false"==e.isCritical&&(m.checked=!1),m.value=m.checked,t.appendChild(g),t.appendChild(m);const p=document.createElement("div");var y="saveChangesInHabit("+e.habitId.toString()+")";p.setAttribute("onClick",y),p.setAttribute("class","add-button"),p.innerHTML='<i class="fa fa-save"></i> Save',t.appendChild(p);const b=document.createElement("div");var h="requestHabitDeletion("+e.habitId.toString()+")";b.setAttribute("onClick",h),b.setAttribute("class","add-button"),b.innerHTML='<i class="fa fa-trash"></i> Delete',t.appendChild(b),document.getElementById("habits-definition-container").appendChild(t)},closeDeleteMessage=function(){document.getElementById("delete-message").style.display="none"},requestHabitDeletion=function(e){document.getElementById("delete-message").style.display="flex";var t="closeDeleteMessage();deleteHabitAndProgress("+e+")";document.getElementById("confirm-deletion-button").setAttribute("onclick",t)},deleteHabitAndProgress=function(e){deleteHabit(e),deleteProgressFromHabitToday(e)},deleteHabit=function(e){var t="habit-"+e.toString(),a=document.getElementById(e.toString());a.parentNode.removeChild(a),window.localStorage.removeItem(t)},deleteProgressFromHabitToday=function(e){for(var t=document.getElementsByClassName("habit-update"),a=t.length-1;a>=0;a--){var n=t[a].getAttribute("habitid"),r=t[a].getAttribute("progressDate");if(formatDate(currentDateTime)==r&&n==e){var s=t[a].getAttribute("id");t[a].parentNode.removeChild(t[a]);var i="progress-"+s.toString();window.localStorage.removeItem(i)}}},displayJournalEditBox=function(){var e=document.getElementById("date-filter").value,t=document.getElementById("journal-edit-box"),a=document.getElementById("daily-journal"),n=getCurrentDateJournal(e);a.value="",n&&n.length>0&&(a.value=JSON.parse(n)),t.setAttribute("progressDate",e),t.style.display="flex"},getCurrentDateJournal=function(e){return window.localStorage.getItem("journal-"+e)},closeJournal=function(){var e=document.getElementById("journal-edit-box"),t=e.getAttribute("progressDate"),a=document.getElementById("daily-journal").value,n={id:"journal-"+t.toString(),value:JSON.stringify(a)};executePushToQueue(n),e.style.display="none"},convertJournalKeyToDateInt=function(e){var t=e.substring(8,12)+e.substring(13,15)+e.substring(16,19);return parseInt(t)},readJournal=function(e){if(0==e.length)return 0;for(var t of(e.sort(function(e,t){return convertJournalKeyToDateInt(t.key)-convertJournalKeyToDateInt(e.key)}),e)){var a=t.text;if(a.length>0){var n=document.createElement("br"),r=document.createElement("div"),s=document.createElement("div");s.innerHTML=t.key.substr(8),s.setAttribute("class","date-label");var i=document.createElement("div");i.innerHTML=a,i.setAttribute("class","text-label"),r.appendChild(s),r.appendChild(i),r.appendChild(n),document.getElementById("journal-container").appendChild(r)}}},addProgressElement=function(e){const t=document.createElement("div");t.setAttribute("id",e.id),t.setAttribute("habitDescription",e.habitDescription),t.setAttribute("target",e.target),t.setAttribute("progressDate",e.progressDate),t.setAttribute("class","box habit-update"),t.setAttribute("isNew",e.isNew),t.setAttribute("habitId",e.habitId),t.setAttribute("isNegative",e.isNegative),t.setAttribute("isCritical",e.isCritical);const a=document.createTextNode(e.habitDescription),n=document.createElement("input"),r=document.createTextNode("Number of times completed:"),s=document.createTextNode("Check when completed:"),i=document.createTextNode("Percentage Completion:"),o=document.createElement("input"),d=document.createElement("div"),l=document.createTextNode(" of "+e.target),u=document.createElement("div");u.setAttribute("class","side-text"),u.appendChild(l);var c=0;null!=e.isNegative&&"true"==e.isNegative?e.numberOfCompletions<=e.target&&(c=100):c=Math.round(100*e.numberOfCompletions/e.target),o.setAttribute("class","number-of-completion"),d.setAttribute("class","percentage-completion"),d.setAttribute("progressDate",e.progressDate),d.innerHTML=c.toString();var g=document.createElement("div");g.setAttribute("class","habit-description");var m=document.createElement("span");m.setAttribute("class","plus-minus");var p=document.createElement("i");p.setAttribute("class","fa fa-plus"),m.appendChild(p);var y=document.createElement("i");y.setAttribute("class","fa fa-tasks"),g.appendChild(y),g.appendChild(a),t.appendChild(g),t.appendChild(m);var b=document.createElement("div");b.setAttribute("class","progress-details");var h=document.createElement("div");if(h.setAttribute("class","progress-container"),e.target>1){o.setAttribute("type","number"),o.setAttribute("value",e.numberOfCompletions),h.appendChild(r);var f=document.createTextNode("+"),v=document.createElement("div");v.setAttribute("class","plus-button normal");var A=document.createTextNode("-"),E=document.createElement("div");v.appendChild(f),E.setAttribute("class","minus-button normal"),E.appendChild(A),v.addEventListener("click",function(e){return function(){var t=e.getElementsByClassName("number-of-completion")[0];addOneToProgress(t),refreshProgress(e),console.log("added progress:"),console.log(e),pushProgressToQueue(e)}}(t)),E.addEventListener("click",function(e){return function(){var t=e.getElementsByClassName("number-of-completion")[0];minusOneToProgress(t),refreshProgress(e),console.log("added progress"),console.log(e),pushProgressToQueue(e)}}(t)),b.appendChild(h),b.appendChild(E),b.appendChild(o),b.appendChild(v),b.appendChild(u)}else{h.appendChild(s);var k=document.createElement("label");k.setAttribute("class","custom-checkbox-container");var D=document.createElement("span");D.setAttribute("class","checkmark"),o.setAttribute("type","checkbox"),1==e.numberOfCompletions?(o.checked=!0,o.setAttribute("value","1")):(o.checked=!1,o.setAttribute("value","0")),o.addEventListener("click",function(e){return function(){var t=e.getElementsByClassName("number-of-completion")[0];1==t.checked?t.setAttribute("value","1"):t.setAttribute("value","0"),refreshProgress(e),console.log("added progress"),console.log(e),pushProgressToQueue(e)}}(t)),k.appendChild(o),k.appendChild(D),b.appendChild(h),b.appendChild(k)}var I=document.createElement("div");I.setAttribute("class","progress-container"),I.appendChild(i),b.appendChild(I),b.appendChild(d),t.appendChild(b),n.value=e.target,document.getElementById("habits-container").appendChild(t),t.addEventListener("change",function(e){return function(){refreshProgress(e),console.log("added progress"),console.log(e),pushProgressToQueue(e)}}(t)),p.addEventListener("click",function(e,t){return function(){toggleExpandCollapse(e,t)}}(p,b)),refreshProgress(t)},toggleExpandCollapse=function(e,t){const a=e.classList.toggle("fa-plus"),n=e.classList.toggle("fa-minus");t.style.display=a&&!n?"none":"block"},updateProgressOnRadial=function(e,t){var a=t.containerHeight/2-t.strokeWidth,n=document.getElementById(t.suffixForIds+"_background-circle"),r=document.getElementById(t.suffixForIds+"_progress-circle"),s=document.getElementById(t.suffixForIds+"_percentage-value");if(s){s.innerHTML=e+" %";var i=(t.strokeWidth+a)/1.5+t.textLeftAdjustment;if(s.style.marginLeft=i.toString()+"px",r.style.stroke=t.progressColor,n.style.stroke=t.emptyColor,!isNaN(e)){n.setAttribute("r",a),r.setAttribute("r",a);var o=Math.PI*a*2;e<0&&(e=0),e>100&&(e=100);var d=(100-e)/100*o;r.setAttribute("stroke-dashoffset",d),window.setTimeout(function(){r.style.strokeDashoffset=d},50),r.setAttribute("stroke-dasharray",o),n.setAttribute("stroke-dasharray",o)}}},createRadialProgressBar=function(e){var t=e.containerHeight/2-e.strokeWidth,a=document.getElementById(e.anchorDivId),n="http://www.w3.org/2000/svg";const r=document.createElement("div");r.setAttribute("id",e.suffixForIds+"_percentage-circle-container");const s=document.createElementNS(n,"svg");s.setAttributeNS(n,"id",e.suffixForIds+"_svg-progress-bar"),s.setAttributeNS(n,"z-index",-1);const i=document.createElementNS(n,"circle");i.setAttribute("id",e.suffixForIds+"_background-circle"),i.setAttribute("stroke-dashoffset","0");const o=document.createElementNS(n,"circle");o.setAttribute("id",e.suffixForIds+"_progress-circle"),o.setAttribute("fill","transparent"),o.setAttribute("stroke-dashoffset","0"),i.setAttribute("cx",e.containerHeight/2),i.setAttribute("cy",e.containerHeight/2),i.setAttribute("stroke-width",e.strokeWidth),i.setAttribute("fill","white"),o.setAttribute("cx",e.containerHeight/2),o.setAttribute("cy",e.containerHeight/2),o.setAttribute("stroke-width",e.strokeWidth);const d=document.createElement("div");d.setAttribute("id",e.suffixForIds+"_percentage-value"),d.innerHTML="0 %";var l=-1*(e.containerHeight-e.strokeWidth-t+e.fontSize/1.9+e.textTopAdjustment),u=(e.strokeWidth+t)/1.5+e.textLeftAdjustment;d.style.marginTop=l.toString()+"px",d.style.marginLeft=u.toString()+"px",d.style.fontSize=e.fontSize.toString()+"px",d.style.position="relative",s.setAttribute("height",e.containerHeight),s.setAttribute("width",e.containerHeight),s.style.transform="rotate(-90deg)",s.appendChild(i),s.appendChild(o),r.appendChild(s),r.appendChild(d),a.appendChild(r)},weekSelectionDiv=document.getElementById("week-day-selection"),mondayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("monday")[0],tuesdayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("tuesday")[0],wednesdayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("wednesday")[0],thursdayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("thursday")[0],fridayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("friday")[0],saturdayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("saturday")[0],sundayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("sunday")[0];mondayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"monday",t)}}(weekSelectionDiv,mondayButtonInAddDiv)),tuesdayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"tuesday",t)}}(weekSelectionDiv,tuesdayButtonInAddDiv)),wednesdayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"wednesday",t)}}(weekSelectionDiv,wednesdayButtonInAddDiv)),thursdayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"thursday",t)}}(weekSelectionDiv,thursdayButtonInAddDiv)),fridayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"friday",t)}}(weekSelectionDiv,fridayButtonInAddDiv)),saturdayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"saturday",t)}}(weekSelectionDiv,saturdayButtonInAddDiv)),sundayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"sunday",t)}}(weekSelectionDiv,sundayButtonInAddDiv));var setDayOfWeek=function(e,t,a){var n=e.getAttribute("weekday"),r=n.split(" ");if(a.classList.contains("selected")){a.classList.remove("selected"),a.classList.add("unselected");const e=r.indexOf(t);e>-1&&r.splice(e,1)}else a.classList.add("selected"),a.classList.remove("unselected"),r.push(t);n=r.join(" "),e.setAttribute("weekday",n)},weekDayNumbers={1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"},isDayOfWeekInHabitWeeks=function(e,t){debugWrite("Checking if day of week is in habit week: getting current week day"),debugWrite(e.getDay());var a=e.getDay(),n=weekDayNumbers[a];debugWrite("Corresponding week day according to array:"),debugWrite(n);var r=t.split(" ");return debugWrite("Habit week days:"),debugWrite(r.toString()),r.indexOf(n)>-1},dynamicWeekDaySelector=function(e){var t=document.createElement("div");t.setAttribute("class","week-day-selection"),t.setAttribute("weekday",e);const a=document.createElement("label"),n=document.createTextNode("Applies to the following days of the week:");a.appendChild(n);var r=dayOfWeek("monday","M",e),s=dayOfWeek("tuesday","T",e),i=dayOfWeek("wednesday","W",e),o=dayOfWeek("thursday","T",e),d=dayOfWeek("friday","F",e),l=dayOfWeek("saturday","S",e),u=dayOfWeek("sunday","S",e);return addWeekDayListener(t,r,"monday"),addWeekDayListener(t,s,"tuesday"),addWeekDayListener(t,i,"wednesday"),addWeekDayListener(t,o,"thursday"),addWeekDayListener(t,d,"friday"),addWeekDayListener(t,l,"saturday"),addWeekDayListener(t,u,"sunday"),t.appendChild(a),t.appendChild(r),t.appendChild(s),t.appendChild(i),t.appendChild(o),t.appendChild(d),t.appendChild(l),t.appendChild(u),t},addWeekDayListener=function(e,t,a){t.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,a,t)}}(e,t))},dayOfWeek=function(e,t,a){var n=document.createElement("div");if(1==isDayInListOfDaysString(e,a))var r="weekday "+e+" selected";else r="weekday "+e+" unselected";return n.setAttribute("class",r),n.innerHTML=t,n},isDayInListOfDaysString=function(e,t){return t.split(" ").indexOf(e)>-1},resetWeekDaySelector=function(e){e.setAttribute("weekday","");var t=e.getElementsByClassName("weekday");for(var a of t)a.classList.remove("selected")},weekTable=function(e){var t={},a=0,n=buildListOfDays(),r=todaysDateDayNumber(),s=weekTableHeader(r);s+="<tr>";for(var i=0;i<=6;i++){var o=e[n[i]],d="";null!=o?o>=0?d="<i class='fa fa-circle icon'></i>":o<0&&(i<r?(d="<i class='fa fa-circle icon red'></i>",a++):i==r&&(d="<i class='fa fa-circle-o icon today'></i>")):d=i<=r?"<i class='fa fa-minus icon'></i>":"",s+="<td>"+d+"</td>"}return s+="</tr></table>",t.tableCode=s,t.numberOfMissesInWeek=a,t},buildListOfDays=function(){var e={},t=new Date,a=t.getDay(),n=formatDate(t);if(e[a]=n,0==a)return e;do{t.setDate(t.getDate()-1),e[a=t.getDay()]=formatDate(t)}while(0!=a);return e},weekTableHeader=function(e){var t="<table><tr>";switch(e){case 0:t+="<th class='today'>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th>";break;case 1:t+="<th class='past'>S</th><th class='today'>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th>";break;case 2:t+="<th class='past'>S</th><th class='past'>M</th><th class='today'>T</th><th>W</th><th>T</th><th>F</th><th>S</th>";break;case 3:t+="<th class='past'>S</th><th class='past'>M</th><th class='past'>T</th><th class='today'>W</th><th>T</th><th>F</th><th>S</th>";break;case 4:t+="<th class='past'>S</th><th class='past'>M</th><th class='past'>T</th><th class='past'>W</th><th class='today'>T</th><th>F</th><th>S</th>";break;case 5:t+="<th class='past'>S</th><th class='past'>M</th><th class='past'>T</th><th class='past'>W</th><th class='past'>T</th><th class='today'>F</th><th>S</th>";break;case 6:t+="<th class='past'>S</th><th class='past'>M</th><th class='past'>T</th><th class='past'>W</th><th class='past'>T</th><th class='past'>F</th><th class='today'>S</th>"}return t+="</tr>"};function getRandomNumber(e,t){var a=Math.random();return Math.floor(1e3*a)%2==0?Math.floor((t-e)*a+e):Math.ceil((t-e)*a+e)}var formatDate=function(e){return e.getFullYear().toString().padStart(2,"0")+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")},todaysDateDayNumber=function(){return(new Date).getDay()},formattedTodaysDate=function(){var e=new Date;return formatDate(e)},translations={en_US:{amazing:["Amazing","Superb","Outstanding","Magnificient","Exceptional","Marvellous","Wonderful","Sublime","Supreme","Splendid","Fantastic","Awesome","Mind-blowing","Brilliant","Smashing","Spectacular","Spectaculous","Awesome"],encouraging:["A little effort each day adds up to big results!","You are stronger than you know!","You are capable of amazing things!","Believe in yourself and you will be unstoppable!","You are doing exactly what you should be doing!","You are being so strong and patient!","I admire how strong you are!","I cannot wait to see what you do next!","You are doing a great job!","You are getting stronger every day!","I am so proud of you!","You are on the right track!","You made it look easy!","You have super powers!"]}},resetMemory=function(){resetHabits(),resetProgress()},resetElement=function(e){for(var t=0;t<localStorage.length;t++){var a=localStorage.key(t);a.indexOf(e+"-")>=0&&window.localStorage.removeItem(a)}},resetProgress=function(){var e=document.getElementsByClassName("habit-update");for(var t of e)t.parentNode.removeChild(t);resetElement("progress")},resetHabits=function(){var e=document.getElementsByClassName("habit-setting");for(var t of e)t.parentNode.removeChild(t);resetElement("habit")},resetDebugging=function(){document.getElementById("debugging-text").innerHTML=""},debugWrite=function(e){document.getElementById("debugging-text").innerHTML+=e+"<br>"},getMemoryDetails=function(){for(var e=0;e<localStorage.length;e++){var t=localStorage.key(e);t.indexOf("habit")>=0?document.getElementById("memory-habit").innerHTML+=window.localStorage.getItem(t):t.indexOf("progress")>=0&&(document.getElementById("memory-progress").innerHTML+=window.localStorage.getItem(t))}},pushProgressToQueue=function(e){var t=readElement(e);encourageIfPassedTarget(t.numberOfCompletions,t.target,t.isCritical);var a={id:"progress-"+t.id,value:JSON.stringify(t)};executePushToQueue(a)},pushProgressArrayToQueue=function(e){var t={id:"progress-"+e.id,value:JSON.stringify(e)};executePushToQueue(t)},pushHabitArrayToQueue=function(e){var t={id:"habit-"+e.habitId,value:JSON.stringify(e)};executePushToQueue(t)},executePushToQueue=function(e){console.log("pushing to queue:"),console.log(e);var t=updateQueue.length,a=updateQueue.pop();null!=a&&a.id!=e.id?(console.log("putting back previous"),updateQueue.push(a)):(console.log("did not put back previous:"),console.log(a)),updateQueue.push(e),console.log(updateQueue),console.log("size before push:"+t.toString()+" size after push:"+updateQueue.length.toString())},pushItemInQueue=function(e){updateQueue.push(e)},readQueueProgress=function(){for(;updateQueue.length>0;){var e=updateQueue.shift();console.log("reading from queue"),console.log(e),putInStorage(e.id,e.value);var t=new Date;document.getElementById("last-saved-information").innerHTML="Last saved: "+t.toLocaleTimeString(),document.getElementById("last-saved-information-habits").innerHTML="Last saved: "+t.toLocaleTimeString()}},putInStorage=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){console.error(e),console.error("Problem writing progress:"+elementToProcess.id.toString()),console.error(currentOutput)}},dataArrays={},loggedIn=!1,maxForNonLoggedIn=2e3,updateQueue=[],radialProgressParameters={strokeWidth:6,containerHeight:80,fontSize:15,textLeftAdjustment:-5,textTopAdjustment:7,progressColor:"rgb(245 184 1)",emptyColor:"rgb(240 221 165)",anchorDivId:"daily-summary",suffixForIds:"12345"},currentDateTime=new Date;console.log("starting javascript:"+currentDateTime.toString());var currentDate=formatDate(currentDateTime);runApp=function(){},onload=function(){"use strict";var e=new Date;console.log("start onload:"+e.toString()),"true"==new URLSearchParams(window.location.search).get("debug")&&(document.getElementById("debug-section").style.display="block"),hideStartProgressButtonOnHabits(),document.getElementById("date-filter").value=currentDate,createRadialProgressBar(radialProgressParameters),e=new Date,console.log("start getting data:"+e.toString()),getHabitProgressJournal(),e=new Date,console.log("end getting data:"+e.toString());var t=dataArrays.habitsArray,a=dataArrays.journalArray,n=(dataArrays.progressArray,dataArrays.todaysProgressArray),r=dataArrays.pastProgressArray;r.length>1?(changeTabToProgress(),showProgressTab()):(hideProgressTab(),changeTabToHabits()),a.length<1&&hideJournalBox(),e=new Date,console.log("start rendering today:"+e.toString());for(const e of n)addProgressElement(e);e=new Date,console.log("end rendering today:"+e.toString());for(const e of t)addHabitElement(e);addEmptyProgressOnNewDay(currentDate,currentDateTime),loadFontAwesome();for(const e of r)addProgressElement(e);applyFilters(),readJournal(a),loadScriptForGraphs(),e=new Date,console.log("end adding habit+pastelements+charts+journal:"+e.toString()),t.length>1&&showGraphsTab(),saveLoop()};var saveLoop=function(){setInterval(readQueueProgress,1e3)},plusButtonInAddDiv=document.getElementById("plus-in-add-div"),minusButtonInAddDiv=document.getElementById("minus-in-add-div"),newTargetDiv=document.getElementById("new-target");plusButtonInAddDiv.addEventListener("click",function(e){return function(){addOneToProgress(e)}}(newTargetDiv)),minusButtonInAddDiv.addEventListener("click",function(e){return function(){minusOneToProgress(e)}}(newTargetDiv));var getHabitProgressJournal=function(){dataArrays=loggedIn?getHabitProgressJournalWhenLoggedIn():getHabitProgressJournalWhenNotLoggedIn()},getHabitProgressJournalWhenLoggedIn=function(){return{progressArray:void 0,habitsArray:void 0,journalArray:{},todaysProgressArray:todaysProgressArray,pastProgressArray:pastProgressArray}},getHabitProgressJournalWhenNotLoggedIn=function(){for(var e=[],t=[],a=[],n=[],r=[],s=localStorage.length,i=0;i<s&&i<maxForNonLoggedIn;i++){var o=localStorage.key(i);if(o.indexOf("progress-")>=0){var d=JSON.parse(localStorage.getItem(o));d.progressDate==formattedTodaysDate()?n.push(d):r.push(d),e.push(d)}else o.indexOf("habit-")>=0?t.push(JSON.parse(localStorage.getItem(o))):o.indexOf("journal-")>=0&&a.push({key:o,text:JSON.parse(localStorage.getItem(o))})}return{progressArray:e,habitsArray:t,journalArray:a,todaysProgressArray:n,pastProgressArray:r}},loadScriptForGraphs=function(){loadScript("https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"),loadScript("https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js")},loadFontAwesome=function(){loadScript("https://use.fontawesome.com/372afdc18b.js")},loadScript=function(e){let t=document.createElement("script");t.setAttribute("src",e),document.body.appendChild(t)},hideJournalBox=function(){document.getElementById("journal-container").innerHTML="no entry yet"},hideProgressTab=function(){document.getElementById("progress-menu").style.display="none"},showProgressTab=function(){document.getElementById("progress-menu").style.display="block"},hideGraphsTab=function(){document.getElementById("graphs-menu").style.display="none"},showGraphsTab=function(){document.getElementById("graphs-menu").style.display="block"},hideStartProgressButtonOnHabits=function(){document.getElementById("go-to-progress-button").style.display="none"},showStartProgressButtonOnHabits=function(){document.getElementById("go-to-progress-button").style.display="flex"},filterDivs=function(e,t,a,n){if(null!=a&&""!=a)for(const s of e){var r=s.getAttribute(t);r==a&&n||r.indexOf(a)>=0&&!n||(s.style.display="none")}},resetElementsOnNewHabitForm=function(){var e=document.getElementsByClassName("habit-update");for(const n of e){var t=n;t.style.display="block";var a=t.getElementsByClassName("number-of-completion")[0];null!=a&&(refreshProgress(t),a.addEventListener("change",function(e){return function(){refreshProgress(e)}}(t)))}return e},refreshProgress=function(e){var t=e.getElementsByClassName("number-of-completion")[0],a=0,n=e.getAttribute("isNegative");null!=n&&"true"==n?t.value<=parseInt(e.getAttribute("target"))&&(a=100):a=Math.round(100*t.value/parseInt(e.getAttribute("target"))),e.getElementsByClassName("percentage-completion")[0].innerHTML=a,setDivAppearanceBasedOnCompletion(e,a),updateDailyProgress()},setDivAppearanceBasedOnCompletion=function(e,t){putBorderBackgroundOrderBasedOnCompletion(e,t),null!=e.getAttribute("iscritical")&&"true"==e.getAttribute("iscritical")&&setDivAppearanceForCritical(e,t)},putBorderBackgroundOrderBasedOnCompletion=function(e,t){t>=100?(e.style.border="1px solid rgb(167 211 162)",e.style.order="95",e.style.background="#daffd9"):t>=50?(e.style.border="1px solid rgb(246 223 35)",e.style.background="rgb(255 251 234)",e.style.order="70"):t<50&&(e.style.border="1px solid lightgrey",e.style.background="white",e.style.order="70"),e.id&&"daily-summary-container"==e.id&&(e.style.order="90")},setDivAppearanceForCritical=function(e,t){var a,n=e.getElementsByClassName("plus-minus")[0];t<100?(e.style.order="60",e.style.border="3px solid red",(a=e.getElementsByClassName("fa fa-tasks")[0])&&n&&(a.classList.remove("fa-tasks"),e.getElementsByClassName("fa")[0].classList.add("fa-warning"),e.getElementsByClassName("habit-description")[0].classList.add("red"),n.style.color="red")):t>=100&&(e.style.border="1px solid lightgrey",(a=e.getElementsByClassName("fa fa-warning")[0])&&n&&(a.classList.remove("fa-warning"),e.getElementsByClassName("fa")[0].classList.add("fa-tasks"),e.getElementsByClassName("habit-description")[0].classList.remove("red"),n.style.color="#b657af"))},updateDailyProgress=function(){var e=getDailyProgress(),t=Math.round(e.fullScore/e.numberOfDivs),a=document.getElementById("daily-summary"),n=document.getElementById("daily-summary-container"),r=document.getElementById("daily-summary-comment");t&&t>0?(t>=100?(radialProgressParameters.progressColor="rgb(167, 211, 162)",radialProgressParameters.emptyColor="rgb(193 236 205)",r.innerHTML="Awesome Achievement !"):t>=50?(radialProgressParameters.progressColor="rgb(238 230 168)",radialProgressParameters.emptyColor="rgb(228 228 228)",r.innerHTML="You are almost there !"):(radialProgressParameters.progressColor="#b657af",radialProgressParameters.emptyColor="rgb(255 217 235)",r.innerHTML="Good Start<br>Keep it up !"),radialProgressParameters.textLeftAdjustment=t>=100?-9:t>=10?-5:-2,updateProgressOnRadial(t,radialProgressParameters),n.style.display="block"):(t=0,n.style.display="none"),setDivAppearanceBasedOnCompletion(a.parentNode,t)},getDailyProgress=function(){var e=document.getElementsByClassName("percentage-completion");currentDate=document.getElementById("date-filter").value;var t=0,a=0;for(const r of e){if(r.getAttribute("progressDate")==currentDate){var n=parseInt(r.innerHTML);t+=n=n>100?100:n,a++}}return{fullScore:t,numberOfDivs:a}},applyFilters=function(){var e=resetElementsOnNewHabitForm(),t=document.getElementById("text-filter").value,a=document.getElementById("date-filter").value;filterDivs(e,"progressDate",a,!0),filterDivs(e,"habitDescription",t,!1)},dateFilter=document.getElementById("date-filter");dateFilter.addEventListener("input",function(){applyFilters(),createMissingElementsForDate(this.value)});var textFilter=document.getElementById("text-filter");textFilter.addEventListener("input",function(){applyFilters()});var createMissingElementsForDate=function(e){var t=e.split("-"),a=new Date(t[0],(parseInt(t[1])-1).toString(),t[2],0,0,0,0);debugWrite("Creating missing progress elements for date:"+e.toString()+" time:"+a.toString()),addEmptyProgressOnNewDay(e,a)},minusOneToProgress=function(e){console.log("minus one"),parseInt(e.value)>0&&(e.value=(parseInt(e.value)-1).toString())},addOneToProgress=function(e){console.log("plus one"),e.value=(parseInt(e.value)+1).toString()},addNewHabitFromForm=function(){var e={};e.id=Date.now(),e.habitId=10*e.id,e.habitDescription=document.getElementById("new-description").value,e.target=parseInt(document.getElementById("new-target").value),e.isNegative=document.getElementById("new-is-negative-flag").checked,e.progressDate=currentDate,e.numberOfCompletions=0,e.isNew=!0,e.isCritical=!1;var t,a=document.getElementById("week-day-selection");e.weekDay=a.getAttribute("weekDay"),""==e.weekDay&&(e.weekDay="monday tuesday wednesday thursday friday saturday sunday"),null!=(t=!e.weekDay||isDayOfWeekInHabitWeeks(currentDateTime,e.weekDay))&&t&&addProgressElement(e),addHabitElement(e),pushProgressArrayToQueue(e),document.getElementById("new-description").value=null,document.getElementById("new-target").value=1,document.getElementById("new-is-negative-flag").checked=!1,resetWeekDaySelector(a),showProgressTab(),showSaveButtonOnHabits(),showStartProgressButtonOnHabits(),saveChangesInHabitFromObject(e),confirmAddition(e.habitId)},saveChangesInHabit=function(e){var t=document.getElementById(e),a=readHabitElement(t);pushHabitArrayToQueue(a)},setHabitAsCritical=function(e){var t=document.getElementById(e),a=readHabitElement(t);a.isCritical="true",pushHabitArrayToQueue(a)},unsetHabitAsCritical=function(e){var t=document.getElementById(e),a=readHabitElement(t);a.isCritical="false",pushHabitArrayToQueue(a)},saveChangesInHabitFromObject=function(e){var t={};t.habitId=e.habitId,t.isNegative=e.isNegative,t.habitDescription=e.habitDescription,t.target=e.target,t.weekDay=e.weekDay,pushHabitArrayToQueue(t)},closeAdditionConfirmation=function(){document.getElementById("addition-message").style.display="none"},confirmAddition=function(e){document.getElementById("addition-message").style.display="flex";var t="closeAdditionConfirmation();document.getElementById("+e+").scrollIntoView();";document.getElementById("check-habit-button").setAttribute("onclick",t)},extractElementsForUpdateLoggedIn=function(e){for(var t=[],a=e.length,n=0;n<a&&n<maxForNonLoggedIn;n++){var r=readElement(e[n]);t.push(r)}console.log(t)},readHabitElement=function(e){var t={};return t.habitId=e.getAttribute("habitId"),t.isNegative=e.getAttribute("isNegative"),t.habitDescription=e.getElementsByClassName("habit-description-definition")[0].value,t.target=parseInt(e.getElementsByClassName("habit-target-definition")[0].value),t.weekDay=e.getElementsByClassName("week-day-selection")[0].getAttribute("weekDay"),t.isCritical=e.getElementsByClassName("simple-checkbox")[0].checked.toString(),t},readElement=function(e){var t={};return t.id=e.getAttribute("id"),t.habitId=e.getAttribute("habitId"),t.habitDescription=e.getAttribute("habitDescription"),t.target=parseInt(e.getAttribute("target")),t.progressDate=e.getAttribute("progressDate"),t.isNew=e.getAttribute("isNew"),t.isNegative=e.getAttribute("isNegative"),t.isCritical=e.getAttribute("isCritical"),t.numberOfCompletions=parseInt(e.getElementsByClassName("number-of-completion")[0].value),t};function APICaller(e,t,a){this.parameters=e,this.callback=t,this.executeCall=function(n,r){var s=new XMLHttpRequest;s.onreadystatechange=function(){4==this.readyState&&200==this.status?t(JSON.parse(this.responseText),r):a()},s.open(e.method,n,!0),s.send()}}var addEmptyProgressOnNewDay=function(e,t){var a=(new Date).setHours(0,0,0,0);if(!(t.setHours(0,0,0,0)>a))for(var n=document.getElementsByClassName("habit-update"),r=document.getElementsByClassName("habit-setting"),s=r.length,i=0;i<s;i++){var o,d=!1;for(var l of n)r[i].getAttribute("habitId")==l.getAttribute("habitId")&&l.getAttribute("progressdate")==e&&(d=!0);if(!d)if(r[i].getAttribute("weekDay")?(debugWrite("Comparing current date time with habit week day"),debugWrite("Current date time:"),debugWrite(t),debugWrite("Habit week day:"),debugWrite(r[i].getAttribute("weekDay")),debugWrite("Is critical?:"),debugWrite(r[i].getAttribute("iscritical")),o=isDayOfWeekInHabitWeeks(t,r[i].getAttribute("weekDay"))):o=!0,null!=o&&o){let t={id:100*Date.now()+i,habitId:r[i].getAttribute("habitId"),habitDescription:r[i].getAttribute("habitDescription"),target:r[i].getAttribute("target"),progressDate:e,isNew:!0,isCritical:r[i].getAttribute("iscritical"),numberOfCompletions:0};addProgressElement(t),console.log("added progress"),console.log(t),pushProgressArrayToQueue(t)}}},launchCharts=function(e,t){for(let a of t)launchHabitSummaries(e,a)},changeTabToProgress=function(){document.getElementById("habits-section").style.display="none",document.getElementById("progress-section").style.display="block",document.getElementById("graphs-section").style.display="none",document.getElementById("progress-menu").classList.add("active"),document.getElementById("habits-menu").classList.remove("active"),document.getElementById("graphs-menu").classList.remove("active")},changeTabToHabits=function(){document.getElementById("habits-section").style.display="block",document.getElementById("progress-section").style.display="none",document.getElementById("graphs-section").style.display="none",document.getElementById("progress-menu").classList.remove("active"),document.getElementById("habits-menu").classList.add("active"),document.getElementById("graphs-menu").classList.remove("active"),document.getElementById("new-description").focus()},changeTabToGraphs=function(){launchCharts(dataArrays.progressArray,dataArrays.habitsArray),document.getElementById("habits-section").style.display="none",document.getElementById("progress-section").style.display="none",document.getElementById("graphs-section").style.display="block",document.getElementById("progress-menu").classList.remove("active"),document.getElementById("habits-menu").classList.remove("active"),document.getElementById("graphs-menu").classList.add("active")},launchHabitSummaries=function(e,t){var a=prepareDataForHabitSummaries(e,t),n=a.dataToShow,r=a.unitAccumulation,s=a.baseline,i=a.progressByDay;n.length>=1&&showGraphsTab();var o=0,d=getNumberOfStreaks(n,s),l=n.length-1,u=(n[l].x-n[0].x)/1e3/60/60/24;if(u>0&&(o=Math.round(30*r/u)),l<0)return!1;if(!(l>=0&&n[l]&&n[l].x))return!1;debugWrite("Launching Chart"),debugWrite(n[l].x.getDay());var c;c=weekTable(i),buildWeekTable(c,t),buildGraph(o,r,d,t,n)},prepareDataForHabitSummaries=function(e,t){var a=[],n=[],r=[],s=0;for(var i of e)i.habitId==t.habitId&&(s+=i.numberOfCompletions,a.push({x:new Date(i.progressDate),y:i.numberOfCompletions}),r.push({x:new Date(i.progressDate),y:i.target}),n[i.progressDate]=i.numberOfCompletions-i.target);return a.sort(function(e,t){return e.x-t.x}),r.sort(function(e,t){return e.x-t.x}),{dataToShow:a,baseline:r,progressByDay:n,unitAccumulation:s}},getNumberOfStreaks=function(e,t){for(var a=0,n=e.length-1;n>=0;n--){var r=e[n].x;if(r.getFullYear()!==currentDateTime.getFullYear()||r.getMonth()!==currentDateTime.getMonth()||r.getDate()!==currentDateTime.getDate()){if(e[n].y<t[n].y)break;a++}else e[n].y>=t[n].y&&a++}return a},buildWeekTable=function(e,t){var a=e.tableCode,n=e.numberOfMissesInWeek;const r=document.createElement("div");var s=document.createElement("i");s.setAttribute("class","fa fa-calendar");const i=document.createTextNode(t.habitDescription),o=document.createElement("div");o.setAttribute("class","graph-title"),o.appendChild(s),o.appendChild(i);const d=document.createElement("div");d.innerHTML="This week summary:",d.setAttribute("class","subtitle");const l=document.createElement("div");l.setAttribute("class","critical-link"),t.isCritical&&"true"==t.isCritical?(l.innerHTML="Unmark as critical",l.setAttribute("onclick","unsetHabitAsCritical("+t.habitId+");")):(l.innerHTML="Mark as critical",l.setAttribute("onclick","setHabitAsCritical("+t.habitId+");")),r.setAttribute("class","table-summary"),r.innerHTML=a;var u=document.createElement("div");u.appendChild(o),u.appendChild(r),u.appendChild(l);var c=document.createElement("br");u.appendChild(c),u.setAttribute("class","box canva-wrapper week-box"),0==n?(u.style.background="#daffd9",u.style.border="1px solid rgb(167 211 162)"):1==n?(u.style.background="rgb(255 252 238)",u.style.border="1px solid rgb(246 223 35)"):n>1&&(u.style.background="white"),document.getElementById("no-graph").style.display="none",document.getElementById("graph-container").appendChild(u)},buildGraph=function(e,t,a,n,r){var s=document.createElement("div");const i=document.createTextNode(n.habitDescription),o=document.createElement("div");var d=document.createElement("i");d.setAttribute("class","fa fa-bar-chart");const l=document.createElement("div");l.innerHTML="Number of streaks: "+a.toString(),l.setAttribute("class","subtitle");const u=document.createElement("div");u.innerHTML="Number of units: "+t.toString()+" ("+e+" per month)",u.setAttribute("class","subtitle"),o.setAttribute("class","graph-title"),o.appendChild(d),o.appendChild(i);const c=document.createElement("div");c.innerHTML="Graph:",c.setAttribute("class","subtitle"),s.appendChild(o),s.setAttribute("id","streaks-"+n.habitId),s.appendChild(l),s.appendChild(u),s.appendChild(c);var g=document.createElement("canvas");g.setAttribute("id","graph-"+n.habitId),s.append(g),s.setAttribute("class","box canva-wrapper streak-box"),a>=10?(s.style.background="#daffd9",s.style.border="1px solid rgb(167 211 162)"):a>=5?(s.style.background="rgb(255 252 238)",s.style.border="1px solid rgb(246 223 35)"):s.style.background="white",document.getElementById("no-streak").style.display="none",document.getElementById("streaks-container").appendChild(s);var m=document.getElementById("graph-"+n.habitId).getContext("2d");var p,y;a>=10?(p="#b5f7b1",y="#3ce132"):a>=5?(p="rgb(255 249 202)",y="rgb(235 209 0)"):(p="rgb(224 224 224)",y="rgb(174 174 174)");new Chart(m,{data:{datasets:[{label:"Your daily score",data:r,backgroundColor:p,borderColor:y,color:"blue",order:1}]},options:{responsive:!0,legend:{position:"bottom",display:!1},scales:{xAxes:[{type:"time",time:{parser:"YYYY-MM-DD",unit:"day"}}],yAxes:[{scaleLabel:{display:!0,labelString:"Progress",type:"line",suggestedMin:0,beginAtZero:!0}}]}},type:"line"})},subMenuGo=function(e){window.scrollTo(0,0);var t=document.getElementById("journal-link"),a=document.getElementById("streaks-link"),n=document.getElementById("week-link"),r=document.getElementById("graph-container"),s=document.getElementById("streaks-container"),i=document.getElementById("journal-container-wrapper");switch(e){case"week-link":n.classList.add("selected-underline"),t.classList.remove("selected-underline"),a.classList.remove("selected-underline"),r.style.display="flex",s.style.display="none",i.style.display="none";break;case"streaks-link":n.classList.remove("selected-underline"),t.classList.remove("selected-underline"),a.classList.add("selected-underline"),r.style.display="none",s.style.display="flex",i.style.display="none";break;case"journal-link":n.classList.remove("selected-underline"),t.classList.add("selected-underline"),a.classList.remove("selected-underline"),r.style.display="none",s.style.display="none",i.style.display="flex"}};runApp();</script><!--      <script  src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
        <script  src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script> --></body></html>