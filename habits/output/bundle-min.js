var updateDailyProgress=function(){var e=getDailyProgress(),t=Math.round(e.fullScore/e.numberOfDivs),n=document.getElementById("daily-summary"),r=document.getElementById("daily-summary-container"),a=document.getElementById("daily-summary-comment");t&&t>0?(t>=100?(radialProgressParameters.progressColor="rgb(167, 211, 162)",radialProgressParameters.emptyColor="rgb(193 236 205)",a.innerHTML="Awesome Achievement !"):t>=50?(radialProgressParameters.progressColor="rgb(238 230 168)",radialProgressParameters.emptyColor="rgb(228 228 228)",a.innerHTML="You are almost there !"):(radialProgressParameters.progressColor="#b657af",radialProgressParameters.emptyColor="rgb(255 217 235)",a.innerHTML="Good Start<br>Keep it up !"),radialProgressParameters.textLeftAdjustment=t>=100?-9:t>=10?-5:-2,updateProgressOnRadial(t,radialProgressParameters),r.style.display="block"):(t=0,r.style.display="none"),setDivAppearanceBasedOnCompletion(n.parentNode,t)},getDailyProgress=function(){var e=document.getElementsByClassName("percentage-completion");currentDate=document.getElementById("date-filter").value;var t=0,n=0;for(const a of e){if(a.getAttribute("progressDate")==currentDate){var r=parseInt(a.innerHTML);t+=r=r>100?100:r,n++}}return{fullScore:t,numberOfDivs:n}},giveSuperKudos=function(e,t){document.getElementById("super-positive-message").style.display="flex",document.getElementById("super-positive-message-title").innerHTML=e,document.getElementById("super-positive-message-subtitle").innerHTML=t},encourageIfPassedTarget=function(e,t,n){e==t&&n&&"true"==n?giveSuperKudos("Special kudos to you :)","You mastered a critical habit today!"):e==t&&(document.getElementById("positive-message").style.display="flex",document.getElementById("positive-message-title").innerHTML=buildCongratulationTitle("en_US")+" :)",document.getElementById("positive-message-subtitle").innerHTML=buildCongratulationSubTitle("en_US"))},closeMessage=function(){document.getElementById("positive-message").style.display="none",document.getElementById("super-positive-message").style.display="none"},buildCongratulationTitle=function(e){var t=translations[e].amazing;return t[getRandomNumber(0,t.length-1)]},buildCongratulationSubTitle=function(e){var t=translations[e].encouraging;return t[getRandomNumber(0,t.length-1)]},buildGraphBox=function(e,t,n,r,a){var s=document.createElement("div");const i=document.createTextNode(r.habitDescription),o=document.createElement("div");var l=document.createElement("div");l.setAttribute("class","task-icon-container"),l.innerHTML=graphIconSmall;const d=document.createElement("div");d.innerHTML="Number of streaks: "+n.toString(),d.setAttribute("class","subtitle");const c=document.createElement("div");c.innerHTML="Number of units: "+t.toString()+" ("+e+" per month)",c.setAttribute("class","subtitle"),o.setAttribute("class","graph-title"),o.appendChild(l),o.appendChild(i);const u=document.createElement("div");u.innerHTML="Graph:",u.setAttribute("class","subtitle"),s.appendChild(o),s.setAttribute("id","streaks-"+r.habitId),s.appendChild(d),s.appendChild(c),s.appendChild(u);var g=document.createElement("canvas");g.setAttribute("id","graph-"+r.habitId),s.append(g),s.setAttribute("class","box canva-wrapper streak-box"),n>=10?(s.style.background="#daffd9",s.style.border="1px solid rgb(167 211 162)"):n>=5?(s.style.background="rgb(255 252 238)",s.style.border="1px solid rgb(246 223 35)"):s.style.background="white",document.getElementById("streaks-container").appendChild(s);var m=document.getElementById("graph-"+r.habitId).getContext("2d");var p,h;n>=10?(p="#b5f7b1",h="#3ce132"):n>=5?(p="rgb(255 249 202)",h="rgb(235 209 0)"):(p="rgb(224 224 224)",h="rgb(174 174 174)");new Chart(m,{data:{datasets:[{label:"Your daily score",data:a,backgroundColor:p,borderColor:h,color:"blue",order:1}]},options:{responsive:!0,legend:{position:"bottom",display:!1},scales:{xAxes:[{type:"time",time:{parser:"MMM-DD",unit:"day",displayFormats:{day:"MMM DD"}}}],yAxes:[{scaleLabel:{display:!0,labelString:"Progress",type:"line",suggestedMin:0,beginAtZero:!0}}]}},type:"line"})},loadScriptForGraphs=function(e){loadScript("https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.min.js").catch(e=>{console.error(e)}).then(waitForChartLoaded()).catch(e=>{console.error(e)}).then(e()).catch(e=>{console.error(e)})},waitForChartLoaded=async function(){return new Promise(function(e,t){checkIfChartLoaded(e,t,0)})},checkIfChartLoaded=function(e,t,n){"undefined"!=typeof Chart?e("loaded"):n>3e3?t("timeout waiting for Chart"):(n+=50,setTimeout(checkIfChartLoaded,50,e,t,n))},addHabitDOMElement=function(e){const t=document.createElement("div");t.setAttribute("habitDescription",e.habitDescription),t.setAttribute("target",e.target),t.setAttribute("class","box habit-setting"),t.setAttribute("id",e.habitId.toString()),t.setAttribute("habitId",e.habitId),t.setAttribute("weekDay",e.weekDay),t.setAttribute("isNegative",e.isNegative),t.setAttribute("isCritical",e.isCritical);var n=e.order?e.order:80;t.style.order=n,t.setAttribute("order",n);const r=document.createTextNode("Update habit:");var a=document.createElement("div");a.setAttribute("class","task-icon-container"),a.innerHTML=taskIcon;const s=document.createElement("div");s.appendChild(a),s.appendChild(r),s.setAttribute("class","habit-title");const i=document.createTextNode("Habit description:"),o=document.createElement("div");o.appendChild(i);const l=document.createElement("textarea");l.value=e.habitDescription,l.setAttribute("class","habit-description-definition large"),l.setAttribute("rows",3);const d=document.createTextNode("Daily Target:"),c=document.createElement("div");c.appendChild(d);const u=document.createElement("input");u.setAttribute("class","habit-target-definition"),u.setAttribute("type","number"),u.value=e.target,t.appendChild(s),t.appendChild(o),t.appendChild(l),t.appendChild(c),t.appendChild(u);var g=dynamicWeekDaySelector(e.weekDay);t.appendChild(g);const m=document.createTextNode("Priority (1 is highest):"),p=document.createElement("div");p.appendChild(m);const h=document.createElement("input");var y;h.setAttribute("class","habit-target-definition"),h.setAttribute("type","number"),h.value=parseInt(t.getAttribute("order",n))-80,h.addEventListener("input",(y=t,function(){var e=80+parseInt(this.value);y.setAttribute("order",e.toString())})),t.appendChild(p),t.appendChild(h);const f=document.createElement("div");f.setAttribute("class","input-title"),f.innerHTML="Critical:",t.appendChild(f);var b=document.createElement("label");b.setAttribute("class","custom-checkbox-container");const v=document.createElement("input");v.setAttribute("id","is-critical"),v.setAttribute("class","simple-checkbox"),null!=e.isCritical&&"true"==e.isCritical?v.checked=!0:"false"==e.isCritical&&(v.checked=!1),v.value=v.checked;var w=document.createElement("span");w.setAttribute("class","checkmark"),v.setAttribute("type","checkbox"),b.appendChild(v),b.appendChild(w),t.appendChild(b);const k=document.createElement("div");var x="saveChangesInHabit("+e.habitId.toString()+")";k.setAttribute("onClick",x),k.setAttribute("class","add-button"),k.innerHTML='<div class="action-icon-container save-icon">'+saveIcon+"</div>Save",t.appendChild(k);const C=document.createElement("div");var I="requestHabitDeletion("+e.habitId.toString()+")";C.setAttribute("onClick",I),C.setAttribute("class","add-button"),C.innerHTML='<div class="action-icon-container delete-icon">'+deleteIcon+"</div>Delete",t.appendChild(C),document.getElementById("habits-definition-container").appendChild(t)},plusButtonInAddDiv=document.getElementById("plus-in-add-div"),minusButtonInAddDiv=document.getElementById("minus-in-add-div"),newTargetDiv=document.getElementById("new-target");plusButtonInAddDiv.addEventListener("click",function(e){return function(){addOneToProgress(e)}}(newTargetDiv)),minusButtonInAddDiv.addEventListener("click",function(e){return function(){minusOneToProgress(e)}}(newTargetDiv));var closeDeleteMessage=function(){document.getElementById("delete-message").style.display="none"},closeSaveMessage=function(){document.getElementById("save-message").style.display="none"},requestHabitDeletion=function(e){document.getElementById("delete-message").style.display="flex";var t="closeDeleteMessage();deleteHabitAndProgress("+e+")";document.getElementById("confirm-deletion-button").setAttribute("onclick",t)},deleteHabitAndProgress=function(e){deleteHabit(e),deleteProgressFromHabitToday(e)},deleteHabit=function(e){var t="habit-"+e.toString(),n=document.getElementById(e.toString());n.parentNode.removeChild(n),removeItemByKey(t)},deleteProgressFromHabitToday=function(e){for(var t=document.getElementsByClassName("habit-update"),n=t.length-1;n>=0;n--){var r=t[n].getAttribute("habitid"),a=t[n].getAttribute("progressDate");if(formatDate(currentDateTime)==a&&r==e){var s=t[n].getAttribute("id");t[n].parentNode.removeChild(t[n]);var i="progress-"+s.toString();removeItemByKey(i)}}},resetElementsOnNewHabitForm=function(){var e=document.getElementsByClassName("habit-update");for(const r of e){var t=r;t.style.display="block";var n=t.getElementsByClassName("number-of-completion")[0];null!=n&&(refreshProgress(t),n.addEventListener("change",function(e){return function(){refreshProgress(e)}}(t)))}return e},addNewHabitFromForm=function(){var e={},t=Date.now();e.id=t.toString(),e.habitId=(10*t).toString(),e.habitDescription=document.getElementById("new-description").value,e.target=parseInt(document.getElementById("new-target").value),e.isNegative=document.getElementById("new-is-negative-flag").checked,e.progressDate=currentDate,e.numberOfCompletions=0,e.isNew=!0,e.isCritical="false",e.order=70;var n,r=document.getElementById("week-day-selection");e.weekDay=r.getAttribute("weekDay"),""==e.weekDay&&(e.weekDay="monday tuesday wednesday thursday friday saturday sunday"),null!=(n=!e.weekDay||isDayOfWeekInHabitWeeks(currentDateTime,e.weekDay))&&n&&(addProgressDOMElement(e),pushProgressArrayToQueue(e)),addHabitDOMElement(e),document.getElementById("new-description").value=null,document.getElementById("new-target").value=1,document.getElementById("new-is-negative-flag").checked=!1,resetWeekDaySelector(r),showProgressTab(),showStartProgressButtonOnHabits(),saveChangesInHabitFromObject(e),confirmAddition(e.habitId)},saveChangesInHabit=function(e){var t=document.getElementById(e),n=habitDOMToJson(t);pushHabitArrayToQueue(n),confirmSave()},setHabitAsCritical=function(e){var t=document.getElementById(e),n=habitDOMToJson(t);n.isCritical="true",pushHabitArrayToQueue(n)},unsetHabitAsCritical=function(e){var t=document.getElementById(e),n=habitDOMToJson(t);n.isCritical="false",pushHabitArrayToQueue(n)},saveChangesInHabitFromObject=function(e){var t={};t.habitId=e.habitId,t.isNegative=e.isNegative,t.habitDescription=e.habitDescription,t.target=e.target,t.weekDay=e.weekDay,pushHabitArrayToQueue(t)},taskIcon='<svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" viewBox="0 0 16 16"><path fill="#000000" d="M2,11 L4,11 C4.51283143,11 4.93550653,11.386027 4.9932722,11.8833761 L5,12 L5,14 C5,14.51285 4.61395571,14.9355092 4.11662025,14.9932725 L4,15 L2,15 C1.48716857,15 1.06449347,14.613973 1.0067278,14.1166239 L1,14 L1,12 C1,11.48715 1.38604429,11.0644908 1.88337975,11.0067275 L2,11 L4,11 L2,11 Z M14,12 C14.5523,12 15,12.4477 15,13 C15,13.5523 14.5523,14 14,14 L8,14 C7.44772,14 7,13.5523 7,13 C7,12.4477 7.44772,12 8,12 L14,12 Z M4,12 L2,12 L2,14 L4,14 L4,12 Z M4,6 C4.55228,6 5,6.44772 5,7 L5,9 C5,9.55228 4.55228,10 4,10 L2,10 C1.44772,10 1,9.55228 1,9 L1,7 C1,6.44772 1.44772,6 2,6 L4,6 Z M14,7 C14.5523,7 15,7.44772 15,8 C15,8.51283143 14.613973,8.93550653 14.1166239,8.9932722 L14,9 L8,9 C7.44772,9 7,8.55228 7,8 C7,7.48716857 7.38604429,7.06449347 7.88337975,7.0067278 L8,7 L14,7 Z M4,7 L2,7 L2,9 L4,9 L4,7 Z M4.77466,1.22614 C5.04092364,1.49240364 5.06512942,1.90907223 4.84727736,2.20268222 L4.77466,2.2868 L2.28033,4.78113 C2.13968,4.92179 1.94891,5.0008 1.75,5.0008 C1.590872,5.0008 1.4369536,4.9502336 1.30973856,4.85798912 L1.21967,4.78113 L0.21967,3.78113 C-0.0732233,3.48824 -0.0732233,3.01337 0.21967,2.72047 C0.485936364,2.45420636 0.902600248,2.43000058 1.19621162,2.64785264 L1.28033,2.72047 L1.75,3.19014 L3.714,1.22614 C4.00689,0.933247 4.48176,0.933246 4.77466,1.22614 Z M14,2 C14.5523,2 15,2.44772 15,3 C15,3.51283143 14.613973,3.93550653 14.1166239,3.9932722 L14,4 L8,4 C7.44772,4 7,3.55228 7,3 C7,2.48716857 7.38604429,2.06449347 7.88337975,2.0067278 L8,2 L14,2 Z"/></svg>',writeIcon='<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="#ffffff" stroke="#ffffff" viewBox="-2 -2 24 24" preserveAspectRatio="xMinYMin" class="jam jam-write"><path stroke="#ffffff" fill="#ffffff" d="M5.72 14.456l1.761-.508 10.603-10.73a.456.456 0 0 0-.003-.64l-.635-.642a.443.443 0 0 0-.632-.003L6.239 12.635l-.52 1.82zM18.703.664l.635.643c.876.887.884 2.318.016 3.196L8.428 15.561l-3.764 1.084a.901.901 0 0 1-1.11-.623.915.915 0 0 1-.002-.506l1.095-3.84L15.544.647a2.215 2.215 0 0 1 3.159.016zM7.184 1.817c.496 0 .898.407.898.909a.903.903 0 0 1-.898.909H3.592c-.992 0-1.796.814-1.796 1.817v10.906c0 1.004.804 1.818 1.796 1.818h10.776c.992 0 1.797-.814 1.797-1.818v-3.635c0-.502.402-.909.898-.909s.898.407.898.91v3.634c0 2.008-1.609 3.636-3.593 3.636H3.592C1.608 19.994 0 18.366 0 16.358V5.452c0-2.007 1.608-3.635 3.592-3.635h3.592z"/></svg>',writeIconSmall='<svg xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" fill="#000" stroke="#000" viewBox="-2 -2 24 24" preserveAspectRatio="xMinYMin" class="jam jam-write"><path stroke="#000" fill="#000" d="M5.72 14.456l1.761-.508 10.603-10.73a.456.456 0 0 0-.003-.64l-.635-.642a.443.443 0 0 0-.632-.003L6.239 12.635l-.52 1.82zM18.703.664l.635.643c.876.887.884 2.318.016 3.196L8.428 15.561l-3.764 1.084a.901.901 0 0 1-1.11-.623.915.915 0 0 1-.002-.506l1.095-3.84L15.544.647a2.215 2.215 0 0 1 3.159.016zM7.184 1.817c.496 0 .898.407.898.909a.903.903 0 0 1-.898.909H3.592c-.992 0-1.796.814-1.796 1.817v10.906c0 1.004.804 1.818 1.796 1.818h10.776c.992 0 1.797-.814 1.797-1.818v-3.635c0-.502.402-.909.898-.909s.898.407.898.91v3.634c0 2.008-1.609 3.636-3.593 3.636H3.592C1.608 19.994 0 18.366 0 16.358V5.452c0-2.007 1.608-3.635 3.592-3.635h3.592z"/></svg>',graphIcon='<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="#ffffff" stroke="#ffffff"  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 305.004 305.004" style="enable-background:new 0 0 305.004 305.004;" xml:space="preserve"><g><path fill="#ffffff"  stroke="#ffffff" d="M68.788,181.868h27.583c5.247,0,9.5-4.253,9.5-9.5v-60.149c0-5.247-4.253-9.5-9.5-9.5H68.788c-5.247,0-9.5,4.253-9.5,9.5   v60.149C59.288,177.615,63.541,181.868,68.788,181.868z"/><path stroke="#ffffff" fill="#ffffff" d="M138.71,181.868h27.583c5.247,0,9.5-4.253,9.5-9.5V84.174c0-5.247-4.253-9.5-9.5-9.5H138.71c-5.247,0-9.5,4.253-9.5,9.5   v88.195C129.21,177.615,133.463,181.868,138.71,181.868z"/><path stroke="#ffffff" fill="#ffffff" d="M208.632,181.868h27.583c5.247,0,9.5-4.253,9.5-9.5v-19.195c0-5.247-4.253-9.5-9.5-9.5h-27.583c-5.247,0-9.5,4.253-9.5,9.5   v19.195C199.132,177.615,203.385,181.868,208.632,181.868z"/><path stroke="#ffffff" fill="#ffffff"  d="M290.668,22.769H167.502V15c0-8.284-6.716-15-15-15c-8.284,0-15,6.716-15,15v7.769H14.335c-5.247,0-9.5,4.253-9.5,9.5v195   c0,5.247,4.253,9.5,9.5,9.5h123.167v20.719L97.15,276.42c-7.5,3.52-10.728,12.451-7.209,19.951   c3.518,7.5,12.451,10.727,19.951,7.209l28.25-13.254c1.858,6.174,7.581,10.674,14.36,10.674c6.779,0,12.502-4.5,14.36-10.673   l28.25,13.254c7.507,3.52,16.435,0.285,19.951-7.209c3.519-7.5,0.291-16.432-7.209-19.951l-40.352-18.932v-20.719h123.167   c5.247,0,9.5-4.253,9.5-9.5v-195C300.168,27.022,295.915,22.769,290.668,22.769z M270.168,206.769H34.835v-154h235.333V206.769z"/></svg>',graphIconSmall='<svg xmlns="http://www.w3.org/2000/svg" width="17px" height="17px" fill="#000" stroke="#000"  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 305.004 305.004" style="enable-background:new 0 0 305.004 305.004;" xml:space="preserve"><g><path fill="#000"  stroke="#000" d="M68.788,181.868h27.583c5.247,0,9.5-4.253,9.5-9.5v-60.149c0-5.247-4.253-9.5-9.5-9.5H68.788c-5.247,0-9.5,4.253-9.5,9.5   v60.149C59.288,177.615,63.541,181.868,68.788,181.868z"/><path stroke="#000" fill="#000" d="M138.71,181.868h27.583c5.247,0,9.5-4.253,9.5-9.5V84.174c0-5.247-4.253-9.5-9.5-9.5H138.71c-5.247,0-9.5,4.253-9.5,9.5   v88.195C129.21,177.615,133.463,181.868,138.71,181.868z"/><path stroke="#000" fill="#000" d="M208.632,181.868h27.583c5.247,0,9.5-4.253,9.5-9.5v-19.195c0-5.247-4.253-9.5-9.5-9.5h-27.583c-5.247,0-9.5,4.253-9.5,9.5   v19.195C199.132,177.615,203.385,181.868,208.632,181.868z"/><path stroke="#000" fill="#000"  d="M290.668,22.769H167.502V15c0-8.284-6.716-15-15-15c-8.284,0-15,6.716-15,15v7.769H14.335c-5.247,0-9.5,4.253-9.5,9.5v195   c0,5.247,4.253,9.5,9.5,9.5h123.167v20.719L97.15,276.42c-7.5,3.52-10.728,12.451-7.209,19.951   c3.518,7.5,12.451,10.727,19.951,7.209l28.25-13.254c1.858,6.174,7.581,10.674,14.36,10.674c6.779,0,12.502-4.5,14.36-10.673   l28.25,13.254c7.507,3.52,16.435,0.285,19.951-7.209c3.519-7.5,0.291-16.432-7.209-19.951l-40.352-18.932v-20.719h123.167   c5.247,0,9.5-4.253,9.5-9.5v-195C300.168,27.022,295.915,22.769,290.668,22.769z M270.168,206.769H34.835v-154h235.333V206.769z"/></svg>',plusIconBig='<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="#ffffff" stroke="#ffffff" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="45.402px" height="45.402px" viewBox="0 0 45.402 45.402" style="enable-background:new 0 0 45.402 45.402;" xml:space="preserve"><g><path d="M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141   c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27   c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435   c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"/></g></svg>',collapseIcon='<svg xmlns="http://www.w3.org/2000/svg" fill="#b657af" stroke="#b657af" width="25px" height="25px" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 42 42;" xml:space="preserve"><path d="M37.059,16H26H16H4.941C2.224,16,0,18.282,0,21s2.224,5,4.941,5H16h10h11.059C39.776,26,42,23.718,42,21  S39.776,16,37.059,16z"/></svg>',expandIcon='<svg xmlns="http://www.w3.org/2000/svg" fill="#b657af" stroke="#b657af" width="25px" height="25px" xmlns:xlink="http://www.w3.org/1999/xlink"  version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 42 42;" xml:space="preserve"><g><path d="M41.267,18.557H26.832V4.134C26.832,1.851,24.99,0,22.707,0c-2.283,0-4.124,1.851-4.124,4.135v14.432H4.141   c-2.283,0-4.139,1.851-4.138,4.135c-0.001,1.141,0.46,2.187,1.207,2.934c0.748,0.749,1.78,1.222,2.92,1.222h14.453V41.27   c0,1.142,0.453,2.176,1.201,2.922c0.748,0.748,1.777,1.211,2.919,1.211c2.282,0,4.129-1.851,4.129-4.133V26.857h14.435   c2.283,0,4.134-1.867,4.133-4.15C45.399,20.425,43.548,18.557,41.267,18.557z"/></g></svg>',trophyIcon='<svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 981.555 981.555" style="enable-background:new 0 0 981.555 981.555;" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" d="M512,112c0-25.641-9.984-49.75-28.117-67.875C456.906,17.141,417.795,9.914,384,21.844V16c0-8.836-7.163-16-16-16H144  c-8.837,0-16,7.164-16,16v5.844c-33.798-11.93-72.904-4.711-99.883,22.281C9.984,62.25,0,86.359,0,112s9.984,49.75,28.117,67.875  c0.2,0.203,0.438,0.328,0.643,0.523c0.193,0.188,0.33,0.406,0.529,0.586l109.258,98.75c5.021,4.555,58.156,45.031,85.453,52.07V384  l-16,64h-16c-17.673,0-32,14.328-32,32v32h192v-32c0-17.672-14.327-32-32-32h-16l-16-64v-52.195  c27.297-7.039,80.433-47.531,85.453-52.07l109.258-98.75c0.199-0.18,0.336-0.398,0.529-0.586c0.205-0.195,0.443-0.32,0.643-0.523  C502.016,161.75,512,137.641,512,112z M393.367,89.375c12.484-12.469,32.781-12.469,45.266,0C444.672,95.422,448,103.453,448,112  c0,8.461-3.281,16.406-9.207,22.43L384,183.953V95.766C387.382,94.227,390.587,92.156,393.367,89.375z M73.367,89.375  c12.484-12.469,32.781-12.469,45.266,0c2.78,2.781,5.985,4.844,9.367,6.391v88.187L73.207,134.43C67.281,128.406,64,120.461,64,112  C64,103.453,67.328,95.422,73.367,89.375z"/></svg>',trophyIcon2='<svg xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><g><path d="M256,250.719c-59.095,0-107.172,48.048-107.172,107.107S196.905,464.933,256,464.933     c59.095,0,107.172-48.048,107.172-107.107S315.094,250.719,256,250.719z M256,444.02c-47.565,0-86.26-38.667-86.26-86.196     s38.696-86.196,86.26-86.196s86.26,38.667,86.26,86.196C342.26,405.354,303.564,444.02,256,444.02z"/><path d="M510.777,11.057c-1.814-3.415-5.366-5.768-9.232-5.768H324.945c-3.474,0-6.722,1.946-8.667,4.826l-60.222,89.33     l-60.341-89.394c-1.945-2.875-5.189-4.764-8.662-4.764H10.456c-3.869,0-7.42,2.356-9.235,5.772     c-1.814,3.417-1.593,7.665,0.572,10.87l153.112,226.567c-29.437,27.22-47.9,66.157-47.9,109.302     c0,82.104,66.839,148.915,148.995,148.915s148.995-66.79,148.995-148.895c0-43.077-18.406-81.93-47.763-109.143L510.21,21.921     C512.373,18.717,512.592,14.471,510.777,11.057z M431.422,26.2L303.206,216.368c-14.268-4.775-29.493-7.55-45.302-7.75     L380.962,26.2H431.422z M330.503,26.2h25.23L231.301,210.762c-10.83,1.813-21.267,4.687-31.177,8.709L330.503,26.2z      M181.503,26.2l61.943,91.818l-12.591,18.543L156.289,26.2H181.503z M131.044,26.2l87.202,129.153l-25.211,37.24L80.596,26.2     H131.044z M30.144,26.2h25.209l125.071,185.186l-12.617,18.582L30.144,26.2z M384.083,357.826     c0,70.574-57.458,127.99-128.084,127.99s-128.084-57.416-128.084-127.99S185.374,229.836,256,229.836     S384.083,287.252,384.083,357.826z M340.882,235.304c-5.719-3.976-11.728-7.675-17.99-10.832L456.652,26.2h25.22L340.882,235.304     z"/></g></g></g></svg>',trophyIconBig='<svg xmlns="http://www.w3.org/2000/svg" stroke="white" fill="white" width="200px" height="200px" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 510 510" style="enable-background:new 0 0 981.555 981.555;" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" d="M512,112c0-25.641-9.984-49.75-28.117-67.875C456.906,17.141,417.795,9.914,384,21.844V16c0-8.836-7.163-16-16-16H144  c-8.837,0-16,7.164-16,16v5.844c-33.798-11.93-72.904-4.711-99.883,22.281C9.984,62.25,0,86.359,0,112s9.984,49.75,28.117,67.875  c0.2,0.203,0.438,0.328,0.643,0.523c0.193,0.188,0.33,0.406,0.529,0.586l109.258,98.75c5.021,4.555,58.156,45.031,85.453,52.07V384  l-16,64h-16c-17.673,0-32,14.328-32,32v32h192v-32c0-17.672-14.327-32-32-32h-16l-16-64v-52.195  c27.297-7.039,80.433-47.531,85.453-52.07l109.258-98.75c0.199-0.18,0.336-0.398,0.529-0.586c0.205-0.195,0.443-0.32,0.643-0.523  C502.016,161.75,512,137.641,512,112z M393.367,89.375c12.484-12.469,32.781-12.469,45.266,0C444.672,95.422,448,103.453,448,112  c0,8.461-3.281,16.406-9.207,22.43L384,183.953V95.766C387.382,94.227,390.587,92.156,393.367,89.375z M73.367,89.375  c12.484-12.469,32.781-12.469,45.266,0c2.78,2.781,5.985,4.844,9.367,6.391v88.187L73.207,134.43C67.281,128.406,64,120.461,64,112  C64,103.453,67.328,95.422,73.367,89.375z"/></svg>',warningIcon='<svg xmlns="http://www.w3.org/2000/svg"  width="15px" height="15px" fill="red" stroke="red"  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 491.537 491.537" style="enable-background:new 0 0 491.537 491.537;" xml:space="preserve"><g><g>\t<path d="M488.117,459.466l-223.1-447.2c-10.4-17.4-32-13.1-37.5,0l-225.2,449.3c-8,15.6,6.3,29.2,18.8,29.2h449.6c0,0,0.3,0,0.8,0    C487.517,490.766,497.017,472.466,488.117,459.466z M54.417,450.066l191.8-383.6l190.8,383.7h-382.6V450.066z"/><path d="M225.417,206.166v104.3c0,11.5,9.4,20.9,20.9,20.9c11.5,0,19.8-8.3,20.9-19.8v-105.4c0-11.5-9.4-20.9-20.9-20.9    C234.817,185.266,225.417,194.666,225.417,206.166z"/>\t\t<circle cx="246.217" cy="388.066" r="20.5"/></g></g></svg>',calendarIcon='<svg xmlns="http://www.w3.org/2000/svg"  width="15px" height="15px" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 489.2 489.2" style="enable-background:new 0 0 489.2 489.2;" xml:space="preserve"><g><path d="M177.8,238.1c0,4.5-3.6,8.1-8.1,8.1h-30.4c-4.5,0-8.1-3.6-8.1-8.1v-30.4c0-4.5,3.6-8.1,8.1-8.1h30.4    c4.5,0,8.1,3.6,8.1,8.1V238.1z M241.3,207.8c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1V207.8z M304.8,207.8c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1V207.8z M177.8,269.6c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1V300c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1V269.6z M241.3,269.6c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1V300c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1V269.6z M296.7,261.5h-30.4c-4.5,0-8.1,3.6-8.1,8.1V300c0,4.5,3.6,8.1,8.1,8.1h30.4c4.5,0,8.1-3.6,8.1-8.1    v-30.4C304.8,265.1,301.2,261.5,296.7,261.5z M106.1,323.3H75.8c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1v-30.4C114.3,326.9,110.6,323.3,106.1,323.3z M114.3,269.6c0-4.5-3.6-8.1-8.1-8.1H75.8    c-4.5,0-8.1,3.6-8.1,8.1V300c0,4.5,3.6,8.1,8.1,8.1h30.4c4.5,0,8.1-3.6,8.1-8.1V269.6z M233.2,323.3h-30.4c-4.5,0-8.1,3.6-8.1,8.1    v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4c4.5,0,8.1-3.6,8.1-8.1v-30.4C241.3,326.9,237.7,323.3,233.2,323.3z M169.7,323.3h-30.4    c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4c4.5,0,8.1-3.6,8.1-8.1v-30.4C177.8,326.9,174.2,323.3,169.7,323.3z     M360.2,246.3c4.5,0,8.1-3.6,8.1-8.1v-30.4c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1H360.2    z M47.7,435.9h230.7c-3.7-11.6-5.8-24-5.9-36.8H47.7c-6,0-10.8-4.9-10.8-10.8V171h361.7v101.1c12.8,0.1,25.2,2,36.8,5.7V94.9    c0-26.3-21.4-47.7-47.7-47.7h-53.4V17.8c0-9.6-7.8-17.4-17.4-17.4h-27.1c-9.6,0-17.4,7.8-17.4,17.4v29.5H163V17.8    c0-9.6-7.8-17.4-17.4-17.4h-27.1c-9.6,0-17.4,7.8-17.4,17.4v29.5H47.7C21.4,47.3,0,68.7,0,95v293.3C0,414.5,21.4,435.9,47.7,435.9    z M489.2,397.7c0,50.3-40.8,91.1-91.1,91.1S307,448,307,397.7s40.8-91.1,91.1-91.1S489.2,347.4,489.2,397.7z M444.1,374.1    c0-2.9-1.1-5.7-3.2-7.7c-4.3-4.3-11.2-4.3-15.5,0L385.8,406l-15.2-15.2c-4.3-4.3-11.2-4.3-15.5,0c-2.1,2.1-3.2,4.8-3.2,7.7    c0,2.9,1.1,5.7,3.2,7.7l22.9,22.9c4.3,4.3,11.2,4.3,15.5,0l47.3-47.3C443,379.8,444.1,377,444.1,374.1z"/>\t</g></svg>',calendarIconBig='<svg xmlns="http://www.w3.org/2000/svg"  width="100px" height="100px" fill="#ffffff" stroke="#ffffff" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 489.2 489.2" style="enable-background:new 0 0 489.2 489.2;" xml:space="preserve"><g><path d="M177.8,238.1c0,4.5-3.6,8.1-8.1,8.1h-30.4c-4.5,0-8.1-3.6-8.1-8.1v-30.4c0-4.5,3.6-8.1,8.1-8.1h30.4    c4.5,0,8.1,3.6,8.1,8.1V238.1z M241.3,207.8c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1V207.8z M304.8,207.8c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1V207.8z M177.8,269.6c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1V300c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1V269.6z M241.3,269.6c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1V300c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1V269.6z M296.7,261.5h-30.4c-4.5,0-8.1,3.6-8.1,8.1V300c0,4.5,3.6,8.1,8.1,8.1h30.4c4.5,0,8.1-3.6,8.1-8.1    v-30.4C304.8,265.1,301.2,261.5,296.7,261.5z M106.1,323.3H75.8c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4    c4.5,0,8.1-3.6,8.1-8.1v-30.4C114.3,326.9,110.6,323.3,106.1,323.3z M114.3,269.6c0-4.5-3.6-8.1-8.1-8.1H75.8    c-4.5,0-8.1,3.6-8.1,8.1V300c0,4.5,3.6,8.1,8.1,8.1h30.4c4.5,0,8.1-3.6,8.1-8.1V269.6z M233.2,323.3h-30.4c-4.5,0-8.1,3.6-8.1,8.1    v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4c4.5,0,8.1-3.6,8.1-8.1v-30.4C241.3,326.9,237.7,323.3,233.2,323.3z M169.7,323.3h-30.4    c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1h30.4c4.5,0,8.1-3.6,8.1-8.1v-30.4C177.8,326.9,174.2,323.3,169.7,323.3z     M360.2,246.3c4.5,0,8.1-3.6,8.1-8.1v-30.4c0-4.5-3.6-8.1-8.1-8.1h-30.4c-4.5,0-8.1,3.6-8.1,8.1v30.4c0,4.5,3.6,8.1,8.1,8.1H360.2    z M47.7,435.9h230.7c-3.7-11.6-5.8-24-5.9-36.8H47.7c-6,0-10.8-4.9-10.8-10.8V171h361.7v101.1c12.8,0.1,25.2,2,36.8,5.7V94.9    c0-26.3-21.4-47.7-47.7-47.7h-53.4V17.8c0-9.6-7.8-17.4-17.4-17.4h-27.1c-9.6,0-17.4,7.8-17.4,17.4v29.5H163V17.8    c0-9.6-7.8-17.4-17.4-17.4h-27.1c-9.6,0-17.4,7.8-17.4,17.4v29.5H47.7C21.4,47.3,0,68.7,0,95v293.3C0,414.5,21.4,435.9,47.7,435.9    z M489.2,397.7c0,50.3-40.8,91.1-91.1,91.1S307,448,307,397.7s40.8-91.1,91.1-91.1S489.2,347.4,489.2,397.7z M444.1,374.1    c0-2.9-1.1-5.7-3.2-7.7c-4.3-4.3-11.2-4.3-15.5,0L385.8,406l-15.2-15.2c-4.3-4.3-11.2-4.3-15.5,0c-2.1,2.1-3.2,4.8-3.2,7.7    c0,2.9,1.1,5.7,3.2,7.7l22.9,22.9c4.3,4.3,11.2,4.3,15.5,0l47.3-47.3C443,379.8,444.1,377,444.1,374.1z"/>\t</g></svg>',saveIcon='<svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="#ffffff" stroke="#ffffff" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><path d="M493.254,77.255l-58.508-58.51C422.742,6.742,406.465,0,389.49,0H352v112c0,8.836-7.164,16-16,16H80   c-8.836,0-16-7.164-16-16V0H32C14.328,0,0,14.326,0,32v448c0,17.673,14.328,32,32,32h448c17.672,0,32-14.327,32-32V122.51   C512,105.535,505.258,89.257,493.254,77.255z M448,448H64V256h384V448z"/>\t<rect x="224" width="64" height="96"/></g></svg>',deleteIcon='<svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" fill="#ffffff" stroke="#ffffff" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 284.011 284.011" style="enable-background:new 0 0 284.011 284.011;" xml:space="preserve"><g><g><path d="M235.732,66.214l-28.006-13.301l1.452-3.057c6.354-13.379,0.639-29.434-12.74-35.789L172.316,2.611    c-6.48-3.079-13.771-3.447-20.532-1.042c-6.76,2.406-12.178,7.301-15.256,13.782l-1.452,3.057L107.07,5.106    c-14.653-6.958-32.239-0.698-39.2,13.955L60.7,34.155c-1.138,2.396-1.277,5.146-0.388,7.644c0.89,2.499,2.735,4.542,5.131,5.68    l74.218,35.25h-98.18c-2.797,0-5.465,1.171-7.358,3.229c-1.894,2.059-2.839,4.815-2.607,7.602l13.143,157.706    c1.53,18.362,17.162,32.745,35.588,32.745h73.54c18.425,0,34.057-14.383,35.587-32.745l11.618-139.408l28.205,13.396    c1.385,0.658,2.845,0.969,4.283,0.969c3.74,0,7.328-2.108,9.04-5.712l7.169-15.093C256.646,90.761,250.386,73.175,235.732,66.214z     M154.594,23.931c0.786-1.655,2.17-2.905,3.896-3.521c1.729-0.614,3.59-0.521,5.245,0.267l24.121,11.455    c3.418,1.624,4.878,5.726,3.255,9.144l-1.452,3.057l-36.518-17.344L154.594,23.931z M169.441,249.604    c-0.673,8.077-7.55,14.405-15.655,14.405h-73.54c-8.106,0-14.983-6.328-15.656-14.405L52.35,102.728h129.332L169.441,249.604z     M231.62,96.835l-2.878,6.06L83.057,33.701l2.879-6.061c2.229-4.695,7.863-6.698,12.554-4.469l128.661,61.108    C231.845,86.509,233.85,92.142,231.62,96.835z"/></g></g></svg>',emptyCircleToday='<svg xmlns="http://www.w3.org/2000/svg" width="15px" height="15px"  fill="#d330cb" stroke="#d330cb"  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 29.107 29.107" style="enable-background:new 0 0 29.107 29.107;" xml:space="preserve"><g><g id="c149_moon"><path id="_x3C_Compound_Path_x3E__7_" d="M14.558,2.079c6.877,0,12.471,5.597,12.471,12.473c0,6.877-5.594,12.476-12.471,12.476    c-6.879,0-12.478-5.599-12.478-12.476C2.08,7.676,7.679,2.079,14.558,2.079 M14.558,0C6.563,0,0,6.562,0,14.552    c0,7.995,6.563,14.555,14.558,14.555s14.549-6.56,14.549-14.555C29.106,6.562,22.552,0,14.558,0L14.558,0z"/></g><g id="Capa_1_226_"></g></g></svg>',fullCirclePast='<svg xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" fill="#55d355" stroke="#55d355" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 455 455" style="enable-background:new 0 0 455 455;" xml:space="preserve"><circle cx="227.5" cy="227.5" r="227.5"/></svg>',fullCircleRed=fullCirclePast.replace("#55d355","red"),minusIconGreen='<svg xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" fill="#55d355" stroke="#55d355"  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 42 42;" xml:space="preserve"><path d="M37.059,16H26H16H4.941C2.224,16,0,18.282,0,21s2.224,5,4.941,5H16h10h11.059C39.776,26,42,23.718,42,21  S39.776,16,37.059,16z"/></svg>',startIcon='<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" fill="#ffffff" stroke="#ffffff"  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 485 485" style="enable-background:new 0 0 485 485;" xml:space="preserve"><g>\t<path d="M413.974,71.026C368.171,25.225,307.274,0,242.5,0S116.829,25.225,71.026,71.026C25.225,116.829,0,177.726,0,242.5   s25.225,125.671,71.026,171.474C116.829,459.775,177.726,485,242.5,485s125.671-25.225,171.474-71.026   C459.775,368.171,485,307.274,485,242.5S459.775,116.829,413.974,71.026z M242.5,455C125.327,455,30,359.673,30,242.5   S125.327,30,242.5,30S455,125.327,455,242.5S359.673,455,242.5,455z"/>\t<polygon points="181.062,336.575 343.938,242.5 181.062,148.425  "/></g></svg>',displayJournalEditBoxAsync=async function(){var e=document.getElementById("date-filter").value,t=document.getElementById("journal-edit-box"),n=document.getElementById("daily-journal"),r=await getCurrentDateJournal(e);n.value="",r&&r.length>0&&(n.value=JSON.parse(r)),t.setAttribute("progressDate",e),t.style.display="flex"},displayJournalEditBox=function(){displayJournalEditBoxAsync().then(()=>{console.log("successfully displayed the journal")},e=>{console.log(e)})},getCurrentDateJournal=async function(e){return await getItemByKey("journal-"+e)},closeJournal=function(){var e=document.getElementById("journal-edit-box"),t=e.getAttribute("progressDate"),n=document.getElementById("daily-journal").value,r={id:"journal-"+t.toString(),value:JSON.stringify(n)};executePushToQueue(r),e.style.display="none"},convertJournalKeyToDateInt=function(e){var t=e.substring(8,12)+e.substring(13,15)+e.substring(16,19);return parseInt(t)},readJournal=function(e){if(!e||0==e.length)return 0;for(var t of(e.sort(function(e,t){return convertJournalKeyToDateInt(t.key)-convertJournalKeyToDateInt(e.key)}),document.getElementById("journal-container").innerHTML="",e)){var n=t.text;if(n.length>0){var r=document.createElement("br"),a=document.createElement("div");a.setAttribute("class","journal-container-day");var s=document.createElement("div");s.innerHTML=t.key.substr(8),s.setAttribute("class","date-label");var i=document.createElement("div");i.innerHTML=n,i.setAttribute("class","text-label"),a.appendChild(s),a.appendChild(i),document.getElementById("journal-container").appendChild(a),document.getElementById("journal-container").appendChild(r)}}},addProgressDOMElement=function(e){const t=document.createElement("div");t.setAttribute("id",e.id),t.setAttribute("habitDescription",e.habitDescription),t.setAttribute("target",e.target),t.setAttribute("progressDate",e.progressDate),t.setAttribute("class","box habit-update"),t.setAttribute("isNew",e.isNew),t.setAttribute("habitId",e.habitId),t.setAttribute("isNegative",e.isNegative),t.setAttribute("isCritical",e.isCritical);var n=e.order?e.order:80;t.setAttribute("order",n),t.style.order=n;const r=document.createTextNode(e.habitDescription),a=document.createElement("input"),s=document.createTextNode("Number of times completed:"),i=document.createTextNode("Check when completed:"),o=document.createTextNode("Percentage Completion:"),l=document.createElement("input"),d=document.createElement("div"),c=document.createTextNode(" of "+e.target),u=document.createElement("div");u.setAttribute("class","side-text"),u.appendChild(c);var g=0;null!=e.isNegative&&"true"==e.isNegative?e.numberOfCompletions<=e.target&&(g=100):g=Math.round(100*e.numberOfCompletions/e.target),l.setAttribute("class","number-of-completion"),d.setAttribute("class","percentage-completion"),d.setAttribute("progressDate",e.progressDate),d.innerHTML=g.toString();var m=document.createElement("div");m.setAttribute("class","habit-description");var p=document.createElement("span");p.setAttribute("class","plus-minus"),p.innerHTML=expandIcon;var h=document.createElement("div");h.setAttribute("class","task-icon-container"),h.innerHTML=taskIcon,m.appendChild(h),m.appendChild(r),t.appendChild(m),t.appendChild(p);var y=document.createElement("div");y.setAttribute("class","progress-details");var f=document.createElement("div");if(f.setAttribute("class","progress-container"),e.target>1){l.setAttribute("type","number"),l.setAttribute("value",e.numberOfCompletions),f.appendChild(s);var b=document.createTextNode("+"),v=document.createElement("div");v.setAttribute("class","plus-button normal");var w=document.createTextNode("-"),k=document.createElement("div");v.appendChild(b),k.setAttribute("class","minus-button normal"),k.appendChild(w),v.addEventListener("click",function(e){return function(){var t=e.getElementsByClassName("number-of-completion")[0];addOneToProgress(t),refreshProgress(e),console.log("added progress:"),console.log(e),pushProgressToQueue(e)}}(t)),k.addEventListener("click",function(e){return function(){var t=e.getElementsByClassName("number-of-completion")[0];minusOneToProgress(t),refreshProgress(e),console.log("added progress"),console.log(e),pushProgressToQueue(e)}}(t)),y.appendChild(f),y.appendChild(k),y.appendChild(l),y.appendChild(v),y.appendChild(u)}else{f.appendChild(i);var x=document.createElement("label");x.setAttribute("class","custom-checkbox-container");var C=document.createElement("span");C.setAttribute("class","checkmark"),l.setAttribute("type","checkbox"),1==e.numberOfCompletions?(l.checked=!0,l.setAttribute("value","1")):(l.checked=!1,l.setAttribute("value","0")),l.addEventListener("click",function(e){return function(){var t=e.getElementsByClassName("number-of-completion")[0];1==t.checked?t.setAttribute("value","1"):t.setAttribute("value","0"),refreshProgress(e),console.log("added progress"),console.log(e),pushProgressToQueue(e)}}(t)),x.appendChild(l),x.appendChild(C),y.appendChild(f),y.appendChild(x)}var I=document.createElement("div");I.setAttribute("class","progress-container"),I.appendChild(o),y.appendChild(I),y.appendChild(d),t.appendChild(y),a.value=e.target,document.getElementById("habits-container").appendChild(t),t.addEventListener("change",function(e){return function(){refreshProgress(e),console.log("added progress"),console.log(e),pushProgressToQueue(e)}}(t)),p.addEventListener("click",function(e,t){return function(){toggleExpandCollapse(e,t)}}(p,y)),refreshProgress(t)},toggleExpandCollapse=function(e,t){var n=e.firstChild.getAttribute("fill"),r=e.firstChild.getAttribute("stroke");"block"==t.style.display?(t.style.display="none",e.innerHTML=expandIcon):(t.style.display="block",e.innerHTML=collapseIcon),e.firstChild.setAttribute("fill",n),e.firstChild.setAttribute("stroke",r)};function renderPastProgressBoxes(){if(dataArrays.pastProgressArray)for(const e of dataArrays.pastProgressArray)addProgressDOMElement(e);applyFilters(),saveLoop()}var refreshProgress=function(e){var t=e.getElementsByClassName("number-of-completion")[0],n=0,r=e.getAttribute("isNegative");null!=r&&"true"==r?t.value<=parseInt(e.getAttribute("target"))&&(n=100):n=Math.round(100*t.value/parseInt(e.getAttribute("target"))),e.getElementsByClassName("percentage-completion")[0].innerHTML=n,setDivAppearanceBasedOnCompletion(e,n),updateDailyProgress()},putBorderBackgroundOrderBasedOnCompletion=function(e,t){if(t>=100){e.style.borderColor="rgb(167 211 162)";var n=parseInt(e.getAttribute("order"))+100;e.style.order=n.toString(),e.style.background="#daffd9"}else t>=50?(e.style.borderColor="rgb(246 223 35)",e.style.background="rgb(255 251 234)",e.style.order=e.getAttribute("order")):t<50&&(e.style.borderColor="lightgrey",e.style.background="white",e.style.order=e.getAttribute("order"));e.id&&"daily-summary-container"==e.id&&(e.style.order="90")},setDivAppearanceForCritical=function(e,t){var n,r=e.getElementsByClassName("plus-minus")[0];t<100?(e.style.borderColor="red",e.style.background="#fff1f1",(n=e.getElementsByClassName("task-icon-container")[0])&&r&&(n.innerHTML=warningIcon,e.getElementsByClassName("habit-description")[0].classList.add("red")),r.firstChild.setAttribute("stroke","red"),r.firstChild.setAttribute("fill","red")):t>=100&&(e.style.borderColor="rgb(167 211 162)",(n=e.getElementsByClassName("task-icon-container")[0])&&r&&(n.innerHTML=taskIcon,e.getElementsByClassName("habit-description")[0].classList.remove("red")),r.firstChild.setAttribute("stroke","#b657af"),r.firstChild.setAttribute("fill","#b657af"))},addEmptyProgressBoxesOnNewDay=function(e,t){var n=(new Date).setHours(0,0,0,0);if(!(t.setHours(0,0,0,0)>n))for(var r=document.getElementsByClassName("habit-update"),a=document.getElementsByClassName("habit-setting"),s=a.length,i=0;i<s;i++){var o,l=!1;for(var d of r)a[i].getAttribute("habitId")==d.getAttribute("habitId")&&d.getAttribute("progressdate")==e&&(l=!0);if(!l)if(a[i].getAttribute("weekDay")?(debugWrite("Comparing current date time with habit week day"),debugWrite("Current date time:"),debugWrite(t),debugWrite("Habit week day:"),debugWrite(a[i].getAttribute("weekDay")),debugWrite("Is critical?:"),debugWrite(a[i].getAttribute("iscritical")),o=isDayOfWeekInHabitWeeks(t,a[i].getAttribute("weekDay"))):o=!0,null!=o&&o){let t={id:100*Date.now()+i,habitId:a[i].getAttribute("habitId"),habitDescription:a[i].getAttribute("habitDescription"),target:a[i].getAttribute("target"),progressDate:e,isNew:!0,isCritical:a[i].getAttribute("iscritical"),order:a[i].getAttribute("order")?a[i].getAttribute("order"):80,numberOfCompletions:0};addProgressDOMElement(t),console.log("added progress"),console.log(t),pushProgressArrayToQueue(t)}}},updateProgressOnRadial=function(e,t){var n=t.containerHeight/2-t.strokeWidth,r=document.getElementById(t.suffixForIds+"_background-circle"),a=document.getElementById(t.suffixForIds+"_progress-circle"),s=document.getElementById(t.suffixForIds+"_percentage-value");if(s){s.innerHTML=e+" %";var i=(t.strokeWidth+n)/1.5+t.textLeftAdjustment;if(s.style.marginLeft=i.toString()+"px",a.style.stroke=t.progressColor,r.style.stroke=t.emptyColor,!isNaN(e)){r.setAttribute("r",n),a.setAttribute("r",n);var o=Math.PI*n*2;e<0&&(e=0),e>100&&(e=100);var l=(100-e)/100*o;a.setAttribute("stroke-dashoffset",l),window.setTimeout(function(){a.style.strokeDashoffset=l},50),a.setAttribute("stroke-dasharray",o),r.setAttribute("stroke-dasharray",o)}}},createRadialProgressBar=function(e){var t=e.containerHeight/2-e.strokeWidth,n=document.getElementById(e.anchorDivId),r="http://www.w3.org/2000/svg";const a=document.createElement("div");a.setAttribute("id",e.suffixForIds+"_percentage-circle-container");const s=document.createElementNS(r,"svg");s.setAttributeNS(r,"id",e.suffixForIds+"_svg-progress-bar"),s.setAttributeNS(r,"z-index",-1);const i=document.createElementNS(r,"circle");i.setAttribute("id",e.suffixForIds+"_background-circle"),i.setAttribute("stroke-dashoffset","0");const o=document.createElementNS(r,"circle");o.setAttribute("id",e.suffixForIds+"_progress-circle"),o.setAttribute("fill","transparent"),o.setAttribute("stroke-dashoffset","0"),i.setAttribute("cx",e.containerHeight/2),i.setAttribute("cy",e.containerHeight/2),i.setAttribute("stroke-width",e.strokeWidth),i.setAttribute("fill","white"),o.setAttribute("cx",e.containerHeight/2),o.setAttribute("cy",e.containerHeight/2),o.setAttribute("stroke-width",e.strokeWidth);const l=document.createElement("div");l.setAttribute("id",e.suffixForIds+"_percentage-value"),l.innerHTML="0 %";var d=-1*(e.containerHeight-e.strokeWidth-t+e.fontSize/1.9+e.textTopAdjustment),c=(e.strokeWidth+t)/1.5+e.textLeftAdjustment;l.style.marginTop=d.toString()+"px",l.style.marginLeft=c.toString()+"px",l.style.fontSize=e.fontSize.toString()+"px",l.style.position="relative",s.setAttribute("height",e.containerHeight),s.setAttribute("width",e.containerHeight),s.style.transform="rotate(-90deg)",s.appendChild(i),s.appendChild(o),a.appendChild(s),a.appendChild(l),n.appendChild(a)},weekSelectionDiv=document.getElementById("week-day-selection"),mondayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("monday")[0],tuesdayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("tuesday")[0],wednesdayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("wednesday")[0],thursdayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("thursday")[0],fridayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("friday")[0],saturdayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("saturday")[0],sundayButtonInAddDiv=weekSelectionDiv.getElementsByClassName("sunday")[0];mondayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"monday",t)}}(weekSelectionDiv,mondayButtonInAddDiv)),tuesdayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"tuesday",t)}}(weekSelectionDiv,tuesdayButtonInAddDiv)),wednesdayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"wednesday",t)}}(weekSelectionDiv,wednesdayButtonInAddDiv)),thursdayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"thursday",t)}}(weekSelectionDiv,thursdayButtonInAddDiv)),fridayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"friday",t)}}(weekSelectionDiv,fridayButtonInAddDiv)),saturdayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"saturday",t)}}(weekSelectionDiv,saturdayButtonInAddDiv)),sundayButtonInAddDiv.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,"sunday",t)}}(weekSelectionDiv,sundayButtonInAddDiv));var setDayOfWeek=function(e,t,n){var r=e.getAttribute("weekday"),a=[];if(""!=r&&(a=r.split(" ")),n.classList.contains("selected")){n.classList.remove("selected"),n.classList.add("unselected");const e=a.indexOf(t);e>-1&&a.splice(e,1)}else n.classList.add("selected"),n.classList.remove("unselected"),a.push(t);r=a.join(" "),e.setAttribute("weekday",r)},weekDayNumbers={1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",0:"sunday"},isDayOfWeekInHabitWeeks=function(e,t){debugWrite("Checking if day of week is in habit week: getting current week day"),debugWrite(e.getDay());var n=e.getDay(),r=weekDayNumbers[n];debugWrite("Corresponding week day according to array:"),debugWrite(r);var a=t.split(" ");return debugWrite("Habit week days:"),debugWrite(a.toString()),a.indexOf(r)>-1},dynamicWeekDaySelector=function(e){var t=document.createElement("div");t.setAttribute("class","week-day-selection"),t.setAttribute("weekday",e);const n=document.createElement("label"),r=document.createTextNode("Applies to the following days of the week:");n.appendChild(r);var a=dayOfWeek("monday","M",e),s=dayOfWeek("tuesday","T",e),i=dayOfWeek("wednesday","W",e),o=dayOfWeek("thursday","T",e),l=dayOfWeek("friday","F",e),d=dayOfWeek("saturday","S",e),c=dayOfWeek("sunday","S",e);return addWeekDayListener(t,a,"monday"),addWeekDayListener(t,s,"tuesday"),addWeekDayListener(t,i,"wednesday"),addWeekDayListener(t,o,"thursday"),addWeekDayListener(t,l,"friday"),addWeekDayListener(t,d,"saturday"),addWeekDayListener(t,c,"sunday"),t.appendChild(n),t.appendChild(a),t.appendChild(s),t.appendChild(i),t.appendChild(o),t.appendChild(l),t.appendChild(d),t.appendChild(c),t},addWeekDayListener=function(e,t,n){t.addEventListener("click",function(e,t){return function(){setDayOfWeek(e,n,t)}}(e,t))},dayOfWeek=function(e,t,n){var r=document.createElement("div");if(1==isDayInListOfDaysString(e,n))var a="weekday "+e+" selected";else a="weekday "+e+" unselected";return r.setAttribute("class",a),r.innerHTML=t,r},isDayInListOfDaysString=function(e,t){return t.split(" ").indexOf(e)>-1},resetWeekDaySelector=function(e){e.setAttribute("weekday","");var t=e.getElementsByClassName("weekday");for(var n of t)n.classList.remove("selected")},weekTable=function(e){var t={},n=0,r=buildListOfDays(),a=todaysDateDayNumber(),s=weekTableHeader(a);s+="<tr>";for(var i=0;i<=6;i++){var o=e[r[i]],l="";null!=o?o>=0?l=fullCirclePast:o<0&&(i<a?(l=fullCircleRed,n++):i==a&&(l=emptyCircleToday)):i<=a&&(l=minusIconGreen),s+="<td>"+l+"</td>"}return s+="</tr></table>",t.tableCode=s,t.numberOfMissesInWeek=n,t},buildListOfDays=function(){var e={},t=new Date,n=t.getDay();if(e[n]=formatDate(t),0==n)return e;var r,a=t;do{a.setDate(a.getDate()-1),e[r=a.getDay()]=formatDate(a)}while(0!=r);return e},weekTableHeader=function(e){var t="<table><tr>";switch(e){case 0:t+="<th class='today'>S</th><th>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th>";break;case 1:t+="<th class='past'>S</th><th class='today'>M</th><th>T</th><th>W</th><th>T</th><th>F</th><th>S</th>";break;case 2:t+="<th class='past'>S</th><th class='past'>M</th><th class='today'>T</th><th>W</th><th>T</th><th>F</th><th>S</th>";break;case 3:t+="<th class='past'>S</th><th class='past'>M</th><th class='past'>T</th><th class='today'>W</th><th>T</th><th>F</th><th>S</th>";break;case 4:t+="<th class='past'>S</th><th class='past'>M</th><th class='past'>T</th><th class='past'>W</th><th class='today'>T</th><th>F</th><th>S</th>";break;case 5:t+="<th class='past'>S</th><th class='past'>M</th><th class='past'>T</th><th class='past'>W</th><th class='past'>T</th><th class='today'>F</th><th>S</th>";break;case 6:t+="<th class='past'>S</th><th class='past'>M</th><th class='past'>T</th><th class='past'>W</th><th class='past'>T</th><th class='past'>F</th><th class='today'>S</th>"}return t+="</tr>"},buildWeekTableBox=function(e,t){var n=e.tableCode,r=e.numberOfMissesInWeek;const a=document.createElement("div");var s=document.createElement("div");s.setAttribute("class","task-icon-container"),s.innerHTML=calendarIcon;const i=document.createTextNode(t.habitDescription),o=document.createElement("div");o.setAttribute("class","graph-title"),o.appendChild(s),o.appendChild(i);const l=document.createElement("div");l.innerHTML="This week summary:",l.setAttribute("class","subtitle");const d=document.createElement("div");d.setAttribute("class","critical-link"),t.isCritical&&"true"==t.isCritical?(d.innerHTML="Unmark as critical",d.setAttribute("onclick","unsetHabitAsCritical("+t.habitId+");")):(d.innerHTML="Mark as critical",d.setAttribute("onclick","setHabitAsCritical("+t.habitId+");")),a.setAttribute("class","table-summary"),a.innerHTML=n;var c=document.createElement("div");c.appendChild(o),c.appendChild(a),c.appendChild(d);var u=document.createElement("br");c.appendChild(u),c.setAttribute("class","box canva-wrapper week-box"),0==r?(c.style.background="#daffd9",c.style.border="1px solid rgb(167 211 162)"):1==r?(c.style.background="rgb(255 252 238)",c.style.border="1px solid rgb(246 223 35)"):r>1&&(c.style.background="white"),document.getElementById("no-week-summary").style.display="none",document.getElementById("week-summary-container").appendChild(c)};function getRandomNumber(e,t){var n=Math.random();return Math.floor(1e3*n)%2==0?Math.floor((t-e)*n+e):Math.ceil((t-e)*n+e)}var apiUser,formatDate=function(e){return e.getFullYear().toString().padStart(2,"0")+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")},getDateFromFormattedDate=function(e){var t=e.split("-");return new Date(t[0],t[1],t[2])},daysSinceToday=function(e){var t=getDateFromFormattedDate(e),n=new Date;return Math.round((n-t)/24/3600)},todaysDateDayNumber=function(){return(new Date).getDay()},formattedTodaysDate=function(){var e=new Date;return formatDate(e)},translations={en_US:{amazing:["Amazing","Superb","Outstanding","Magnificient","Exceptional","Marvellous","Wonderful","Sublime","Supreme","Splendid","Fantastic","Awesome","Mind-blowing","Brilliant","Smashing","Spectacular","Spectaculous","Awesome","Fabulous"],encouraging:["A little effort each day adds up to big results!","You are stronger than you know!","You are capable of amazing things!","Believe in yourself and you will be unstoppable!","You are doing exactly what you should be doing!","You are being so strong and patient!","I admire how strong you are!","I cannot wait to see what you do next!","You are doing a great job!","You are getting stronger every day!","I am so proud of you!","You are on the right track!","You made it look easy!","You have super powers!","You are irresistible!"]}},resetMemory=function(){resetHabits(),resetProgress()},resetElement=function(e){for(var t=0;t<localStorage.length;t++){var n=localStorage.key(t);n.indexOf(e+"-")>=0&&window.localStorage.removeItem(n)}},resetProgress=function(){var e=document.getElementsByClassName("habit-update");for(var t of e)t.parentNode.removeChild(t);resetElement("progress")},resetHabits=function(){var e=document.getElementsByClassName("habit-setting");for(var t of e)t.parentNode.removeChild(t);resetElement("habit")},resetDebugging=function(){document.getElementById("debugging-text").innerHTML=""},debugWrite=function(e){document.getElementById("debugging-text").innerHTML+=e+"<br>"},getMemoryDetails=function(){for(var e=0;e<localStorage.length;e++){var t=localStorage.key(e);t.indexOf("habit")>=0?document.getElementById("memory-habit").innerHTML+=window.localStorage.getItem(t):t.indexOf("progress")>=0&&(document.getElementById("memory-progress").innerHTML+=window.localStorage.getItem(t))}},pushProgressToQueue=function(e){var t=progressDOMToJson(e);encourageIfPassedTarget(t.numberOfCompletions,t.target,t.isCritical);var n={id:"progress-"+t.id,value:JSON.stringify(t)};executePushToQueue(n)},pushProgressArrayToQueue=function(e){var t={id:"progress-"+e.id,value:JSON.stringify(e)};executePushToQueue(t)},pushHabitArrayToQueue=function(e){var t={id:"habit-"+e.habitId,value:JSON.stringify(e)};executePushToQueue(t)},executePushToQueue=function(e){console.log("pushing to queue:"),console.log(e);var t=updateQueue.length,n=updateQueue.pop();null!=n&&n.id!=e.id?(console.log("putting back previous"),updateQueue.push(n)):(console.log("did not put back previous:"),console.log(n)),updateQueue.push(e),console.log(updateQueue),console.log("size before push:"+t.toString()+" size after push:"+updateQueue.length.toString())},pushItemInQueue=function(e){updateQueue.push(e)},readQueueProgress=function(){for(;updateQueue.length>0;){var e=updateQueue.shift();console.log("reading from queue"),console.log(e),putInStorage(e.id,e.value);var t=new Date;document.getElementById("last-saved-information").innerHTML="Last saved: "+t.toLocaleTimeString(),document.getElementById("last-saved-information-habits").innerHTML="Last saved: "+t.toLocaleTimeString()}},putInStorage=function(e,t){try{setItem(e,t)}catch(e){console.error(e),console.error("Problem writing progress:"+elementToProcess.id.toString()),console.error(currentOutput)}},getHabitProgressJournal=async function(){if(loggedIn){var e,t=`http://localhost:5000/get-habit-progress-journal?user="${apiUser}"`;try{e=await fetch(t)}catch(e){return console.log("could not connect to the server"),console.log(e),getHabitProgressJournalFromStorage()}return"200"==e.status?e.json():(console.log("status of the api call:"+e.status),getHabitProgressJournalFromStorage())}return getHabitProgressJournalFromStorage()},getHabitProgressJournalFromStorage=function(){for(var e=[],t=[],n=[],r=[],a=[],s=localStorage.length,i=0;i<s;i++){var o=localStorage.key(i);if(o.indexOf("progress-")>=0){var l=JSON.parse(localStorage.getItem(o));l.progressDate==formattedTodaysDate()?r.push(l):daysSinceToday(l.progressDate)<=30&&a.push(l),e.push(l)}else o.indexOf("habit-")>=0?t.push(JSON.parse(localStorage.getItem(o))):o.indexOf("journal-")>=0&&n.push({key:o,text:JSON.parse(localStorage.getItem(o))})}return{progressArray:e,habitsArray:t,journalArray:n,todaysProgressArray:r,pastProgressArray:a}},removeItemByKey=async function(e){window.localStorage.removeItem(e);var t,n={method:"GET",url:`http://localhost:5000/removeItemByKey?keyName=${e}&user="${apiUser}"`};try{t=await APICall(n)}catch(e){console.log(e)}return console.log("item removed"),t},getItemByKey=async function(e){if(loggedIn){var t,n={method:"GET",url:`http://localhost:5000/getItemByKey?keyName=${e}&user="${apiUser}"`};try{t=await APICall(n)}catch(t){return console.log(t),window.localStorage.getItem(e)}return t}var r=window.localStorage.getItem(e);return console.log("item got from memory:"+r),r},setItem=async function(e,t){window.localStorage.setItem(e,t);var n,r={method:"GET",url:`http://localhost:5000/setItemValue?keyName=${e}&value=${t}&user="${apiUser}"`};try{n=await APICall(r)}catch(e){console.log(e)}return console.log("item set:"+e+":"+t),n},updateParameterInItemValue=async function(e,t,n){var r,a,s=await getItemByKey(e);(r="string"==typeof s||s instanceof String?JSON.parse(s):s)[t]=n,a=JSON.stringify(r),console.log("object got from memory before update"),console.log(a);await setItem(e,a);console.log("update executed");var i={method:"GET",url:`http://localhost:5000/updateParamInItem?keyName=${e}&parameterName=${t}&value=${n}&user="${apiUser}"`};s="";try{s=await APICall(i)}catch(e){console.log(e)}return console.log("item set:"+e+":"+n),s},dataArrays={},loggedIn=!1,maxForNonLoggedIn=2e3,updateQueue=[],radialProgressParameters={strokeWidth:6,containerHeight:80,fontSize:15,textLeftAdjustment:-5,textTopAdjustment:7,progressColor:"rgb(245 184 1)",emptyColor:"rgb(240 221 165)",anchorDivId:"daily-summary",suffixForIds:"12345"},currentDateTime=new Date;console.log("starting javascript:"+currentDateTime.toString());var currentDate=formatDate(currentDateTime);onload=function(){"use strict";const e=new URLSearchParams(window.location.search);"true"==e.get("debug")&&(document.getElementById("debug-section").style.display="block"),apiUser=e.get("user"),console.log("user:"+apiUser),e.get("user")&&e.get("user").length>1&&(loggedIn=!0),hideStartProgressButtonOnHabits(),document.getElementById("date-filter").value=currentDate,createRadialProgressBar(radialProgressParameters),renderApplication().then(e=>{setTimeout(placeSVGIcons,5),setTimeout(renderPastProgressBoxes,10),setTimeout(showSummariesTab,15)},e=>{console.log(e)})};var renderApplication=async function(){if((dataArrays=await getHabitProgressJournal()).progressArray&&dataArrays.progressArray.length>=1?(changeTabToProgress(),showProgressTab()):(hideProgressTab(),changeTabToHabits()),dataArrays.journalArray&&dataArrays.journalArray.length<1&&hideJournalBox(),dataArrays.todaysProgressArray)for(const e of dataArrays.todaysProgressArray)addProgressDOMElement(e);if(dataArrays.habitsArray)for(const e of dataArrays.habitsArray)addHabitDOMElement(e);addEmptyProgressBoxesOnNewDay(currentDate,currentDateTime)};function prepareSummaries(){readJournal(dataArrays.journalArray),loadScriptForGraphs(showGraphsTabIfGoodLength)}function showGraphsTabIfGoodLength(){dataArrays.habitsArray&&dataArrays.habitsArray.length>=1&&showGraphTab()}var saveLoop=function(){setInterval(readQueueProgress,1e3)},reloadHabitProgressJournal=async function(){dataArrays=await getHabitProgressJournal()},placeSVGIcons=function(){document.getElementById("daily-journal-icon").innerHTML=writeIcon,document.getElementById("daily-journal-icon-small").innerHTML=writeIconSmall,document.getElementById("week-link-icon").innerHTML=calendarIcon,document.getElementById("small-graph-icon").innerHTML=graphIconSmall,document.getElementById("small-graph-journal").innerHTML=writeIconSmall,document.getElementById("small-task-icon").innerHTML=taskIcon,document.getElementById("save-icon").innerHTML=saveIcon,document.getElementById("start-icon").innerHTML=startIcon,document.getElementById("trophy-icon-positive").innerHTML=trophyIconBig,document.getElementById("trophy-icon-super-positive").innerHTML=trophyIconBig,document.getElementById("start-icon").innerHTML=startIcon;var e=document.getElementsByClassName("trophy-icon");for(var t of e)t.innerHTML=trophyIcon;var n=document.getElementsByClassName("trophy-icon-big");for(var r of n)r.innerHTML=trophyIconBig;document.getElementById("week-table-icon").innerHTML=calendarIconBig,document.getElementById("plus-icon-button").innerHTML=plusIconBig},loadScript=async function(e){return new Promise(function(t,n){let r=document.createElement("script"),a=document.head||document.getElementsByTagName("head")[0];r.setAttribute("src",e),r.setAttribute("async",!1),r.addEventListener("load",function(){t("success")}),r.addEventListener("error",function(e){n(e.error)}),a.insertBefore(r,a.firstChild)})},hideJournalBox=function(){document.getElementById("journal-container").innerHTML="<div class='journal-container-day'>No journal entry yet.</div>"},hideProgressTab=function(){document.getElementById("progress-menu").style.display="none"},showProgressTab=function(){document.getElementById("progress-menu").style.display="block"},hideSummariesTab=function(){document.getElementById("graphs-menu").style.display="none",document.getElementById("go-to-summaries-button").style.display="none"},showSummariesTab=function(){dataArrays.habitsArray&&dataArrays.habitsArray.length>=1&&(document.getElementById("graphs-menu").style.display="block",document.getElementById("go-to-summaries-button").style.display="flex")},showGraphTab=function(){document.getElementById("streaks-link").style.display="block"},hideGraphTab=function(){document.getElementById("streaks-link").style.display="block"},hideStartProgressButtonOnHabits=function(){document.getElementById("go-to-progress-button").style.display="none"},showStartProgressButtonOnHabits=function(){document.getElementById("go-to-progress-button").style.display="flex"},filterDivs=function(e,t,n,r){if(null!=n&&""!=n)for(const s of e){var a=s.getAttribute(t);a==n&&r||a.indexOf(n)>=0&&!r||(s.style.display="none")}},setDivAppearanceBasedOnCompletion=function(e,t){putBorderBackgroundOrderBasedOnCompletion(e,t),null!=e.getAttribute("iscritical")&&"true"==e.getAttribute("iscritical")&&setDivAppearanceForCritical(e,t)},applyFilters=function(){var e=resetElementsOnNewHabitForm(),t=document.getElementById("text-filter").value,n=document.getElementById("date-filter").value;filterDivs(e,"progressDate",n,!0),filterDivs(e,"habitDescription",t,!1)},dateFilter=document.getElementById("date-filter");dateFilter.addEventListener("input",function(){applyFilters(),createMissingElementsForDate(this.value)});var textFilter=document.getElementById("text-filter");textFilter.addEventListener("input",function(){applyFilters()});var createMissingElementsForDate=function(e){var t=e.split("-"),n=new Date(t[0],(parseInt(t[1])-1).toString(),t[2],0,0,0,0);debugWrite("Creating missing progress elements for date:"+e.toString()+" time:"+n.toString()),addEmptyProgressBoxesOnNewDay(e,n)},minusOneToProgress=function(e){console.log("minus one"),parseInt(e.value)>0&&(e.value=(parseInt(e.value)-1).toString())},addOneToProgress=function(e){console.log("plus one"),e.value=(parseInt(e.value)+1).toString()},closeAdditionConfirmation=function(){document.getElementById("addition-message").style.display="none"},confirmAddition=function(e){document.getElementById("addition-message").style.display="flex";var t="closeAdditionConfirmation();document.getElementById("+e+").scrollIntoView();";document.getElementById("check-habit-button").setAttribute("onclick",t)},confirmSave=function(){document.getElementById("save-message").style.display="flex"},habitDOMToJson=function(e){var t={};return t.habitId=e.getAttribute("habitId"),t.isNegative=e.getAttribute("isNegative"),t.order=e.getAttribute("order"),t.habitDescription=e.getElementsByClassName("habit-description-definition")[0].value,t.target=parseInt(e.getElementsByClassName("habit-target-definition")[0].value),t.weekDay=e.getElementsByClassName("week-day-selection")[0].getAttribute("weekDay"),t.isCritical=e.getElementsByClassName("simple-checkbox")[0].checked.toString(),t},progressDOMToJson=function(e){var t={};return t.id=e.getAttribute("id"),t.habitId=e.getAttribute("habitId"),t.habitDescription=e.getAttribute("habitDescription"),t.target=parseInt(e.getAttribute("target")),t.progressDate=e.getAttribute("progressDate"),t.isNew=e.getAttribute("isNew"),t.isNegative=e.getAttribute("isNegative"),t.isCritical=e.getAttribute("isCritical"),t.order=e.getAttribute("order")?e.getAttribute("order"):80,t.numberOfCompletions=parseInt(e.getElementsByClassName("number-of-completion")[0].value),t},launchAllWeekTables=function(e,t){document.getElementById("streaks-container").innerHTML='<div id="no-streak">Graphs will be shown after adding at least one habit.</div>',document.getElementById("no-streak").style.display="none",document.getElementById("week-summary-container").innerHTML='<div id="no-week-summary">Week summary will be shown after adding at least one habit.</div>',document.getElementById("no-week-summary").style.display="none";for(let n of t)launchHabitWeekTable(e,n)},launchAllCharts=function(e,t){document.getElementById("streaks-container").innerHTML='<div id="no-streak">Graphs will be shown after adding at least one habit.</div>',document.getElementById("no-streak").style.display="none";for(let n of t)launchHabitChart(e,n)},changeTabToProgress=function(){document.getElementById("habits-section").style.display="none",document.getElementById("progress-section").style.display="block",document.getElementById("graphs-section").style.display="none",document.getElementById("progress-menu").classList.add("active"),document.getElementById("habits-menu").classList.remove("active"),document.getElementById("graphs-menu").classList.remove("active")},changeTabToHabits=function(){document.getElementById("habits-section").style.display="block",document.getElementById("progress-section").style.display="none",document.getElementById("graphs-section").style.display="none",document.getElementById("progress-menu").classList.remove("active"),document.getElementById("habits-menu").classList.add("active"),document.getElementById("graphs-menu").classList.remove("active")},changeTabToSummaries=function(){reloadHabitProgressJournal().then(e=>{prepareSummaries(),launchAllWeekTables(dataArrays.progressArray,dataArrays.habitsArray),document.getElementById("habits-section").style.display="none",document.getElementById("progress-section").style.display="none",document.getElementById("graphs-section").style.display="block",document.getElementById("progress-menu").classList.remove("active"),document.getElementById("habits-menu").classList.remove("active"),document.getElementById("graphs-menu").classList.add("active"),subMenuGo("week-link")},e=>{console.log(e)})},changeTabToGraph=function(){changeTabToSummaries(),subMenuGo("streak-links")},launchHabitWeekTable=function(e,t){var n,r=prepareDataForHabitWeekTable(e,t);n=weekTable(r),buildWeekTableBox(n,t)},launchHabitChart=function(e,t){var n=prepareDataForHabitGraph(e,t),r=n.dataToShow,a=n.unitAccumulation,s=n.baseline;r.length>=1&&showGraphTab();var i=0,o=getNumberOfStreaks(r,s),l=r.length-1,d=(r[l].x-r[0].x)/1e3/60/60/24;return d>0&&(i=Math.round(30*a/d)),!(l<0)&&(!!(l>=0&&r[l]&&r[l].x)&&(debugWrite("Launching Chart"),debugWrite(r[l].x.getDay()),void buildGraphBox(i,a,o,t,r)))},prepareDataForHabitGraph=function(e,t){var n=[],r=[],a=0;for(var s of e)s.habitId==t.habitId&&(a+=s.numberOfCompletions,n.push({x:new Date(s.progressDate),y:s.numberOfCompletions}),r.push({x:new Date(s.progressDate),y:s.target}));return n.sort(function(e,t){return e.x-t.x}),r.sort(function(e,t){return e.x-t.x}),{dataToShow:n,baseline:r,unitAccumulation:a}},prepareDataForHabitWeekTable=function(e,t){var n=[];for(var r of e)r.habitId==t.habitId&&(n[r.progressDate]=r.numberOfCompletions-r.target);return n},getNumberOfStreaks=function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r].x;if(a.getFullYear()!==currentDateTime.getFullYear()||a.getMonth()!==currentDateTime.getMonth()||a.getDate()!==currentDateTime.getDate()){if(e[r].y<t[r].y)break;n++}else e[r].y>=t[r].y&&n++}return n},subMenuGo=function(e){window.scrollTo(0,0);var t=document.getElementById("journal-link"),n=document.getElementById("streaks-link"),r=document.getElementById("week-link"),a=document.getElementById("week-summary-container"),s=document.getElementById("streaks-container"),i=document.getElementById("journal-container-wrapper");switch(e){case"week-link":r.classList.add("selected-underline"),t.classList.remove("selected-underline"),n.classList.remove("selected-underline"),a.style.display="flex",s.style.display="none",i.style.display="none";break;case"streaks-link":launchAllCharts(dataArrays.progressArray,dataArrays.habitsArray),r.classList.remove("selected-underline"),t.classList.remove("selected-underline"),n.classList.add("selected-underline"),a.style.display="none",s.style.display="flex",i.style.display="none";break;case"journal-link":r.classList.remove("selected-underline"),t.classList.add("selected-underline"),n.classList.remove("selected-underline"),a.style.display="none",s.style.display="none",i.style.display="flex"}};